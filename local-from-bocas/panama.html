<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panamá - Local From Bocas | Descubre las 10 Provincias y 3 Comarcas</title>
    <meta name="description" content="Explora la diversidad de Panamá: 10 provincias y 3 comarcas indígenas. Descubre la riqueza cultural, geográfica y natural de cada región del país.">
    <meta name="keywords" content="Panamá, provincias Panamá, comarcas indígenas, geografía Panamá, cultura panameña">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/geojson-map.css">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Estilos globales para ancho completo */
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* ===== SECTION NAVIGATION STYLES ===== */
        .section-nav {
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(15, 91, 85, 0.1);
            z-index: 100;
            transition: all 0.3s ease;
        }

        .section-nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section-nav-progress {
            height: 3px;
            background: rgba(15, 91, 85, 0.1);
            margin-bottom: 1rem;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--jungle-teal), var(--ocean-blue));
            width: 0%;
            transition: width 0.3s ease;
        }

        .section-nav-list {
            display: flex;
            gap: 2rem;
            list-style: none;
            margin: 0;
            padding: 0;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .section-nav-list::-webkit-scrollbar {
            display: none;
        }

        .nav-link {
            color: var(--neutral-gray);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--jungle-teal);
            background: rgba(15, 91, 85, 0.1);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* ===== UNIFIED CARD SYSTEM ===== */
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(15, 91, 85, 0.1);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            padding: 1.5rem 1.5rem 0;
            position: relative;
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-footer {
            padding: 0 1.5rem 1.5rem;
        }

        /* Card Variants */
        .card--stat {
            text-align: center;
            padding: 2rem;
        }

        .card--feature {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .card--interactive {
            cursor: pointer;
            position: relative;
        }

        .card--interactive::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--jungle-teal), var(--ocean-blue));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .card--interactive:hover::before {
            opacity: 0.1;
        }

        /* Card Content Elements */
        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .card-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--jungle-teal);
            font-family: var(--font-display);
            margin-bottom: 0.5rem;
        }

        .card-label {
            color: var(--neutral-gray);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--jungle-teal);
            margin-bottom: 0.75rem;
        }

        .card-description {
            color: var(--neutral-gray);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .card-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .highlight-tag {
            background: rgba(15, 91, 85, 0.1);
            color: var(--jungle-teal);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* ===== GRID SYSTEM ===== */
        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid--2-cols {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid--3-cols {
            grid-template-columns: repeat(3, 1fr);
        }

        .grid--4-cols {
            grid-template-columns: repeat(4, 1fr);
        }

        @media (max-width: 1024px) {
            .grid--4-cols {
                grid-template-columns: repeat(2, 1fr);
            }
            .grid--3-cols {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .grid--4-cols,
            .grid--3-cols,
            .grid--2-cols {
                grid-template-columns: 1fr;
            }
        }

        /* ===== MICRO-INTERACTIONS ===== */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .interactive-element {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .interactive-element:hover {
            transform: translateY(-2px);
        }

        .interactive-element:active {
            transform: translateY(0);
        }

        .focusable:focus {
            outline: 2px solid var(--jungle-teal);
            outline-offset: 2px;
        }

        .btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* ===== ACCESSIBILITY IMPROVEMENTS ===== */
        @media (prefers-contrast: high) {
            .card {
                border: 2px solid var(--jungle-teal);
            }
            
            .nav-link.active {
                background: var(--jungle-teal);
                color: white;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .nav-link:focus,
        .month-header:focus,
        .festival-item:focus,
        .holiday-item:focus {
            outline: 2px solid var(--jungle-teal);
            outline-offset: 2px;
        }
        
        /* Ancho adaptativo inteligente para el mapa */
        .full-width-map-container {
            width: 90vw;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }
        
        /* Tablet: 95% del ancho */
        @media (max-width: 1024px) {
            .full-width-map-container {
                width: 95vw;
                max-width: none;
            }
        }
        
        /* Mobile: 100% del ancho */
        @media (max-width: 768px) {
            .full-width-map-container {
                width: 100vw;
                margin-left: calc(-50vw + 50%);
                max-width: none;
            }
        }
        
        .hero {
            background: linear-gradient(135deg, var(--jungle-teal) 0%, var(--ocean-blue) 100%);
            background-image: url('https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            background-blend-mode: overlay;
        }
        .hero::before {
            background: rgba(15, 91, 85, 0.7);
        }
        .panama-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .stat-item {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
        }
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--jungle-teal);
            font-family: var(--font-display);
        }
        .stat-label {
            color: var(--neutral-gray);
            font-weight: 500;
            font-size: 14px;
        }
        .province-card, .comarca-card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: transform 0.2s ease;
        }
        .province-card:hover, .comarca-card:hover {
            transform: translateY(-2px);
        }
        .province-header, .comarca-header {
            position: relative;
        }
        .province-header .pill, .comarca-header .pill {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }
        .province-content, .comarca-content {
            padding: 1.5rem;
        }
        .province-highlights, .comarca-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        .hero-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* Estilos base del contenedor del mapa */
        .full-width-map-container {
            margin-top: 0;
            margin-bottom: 0;
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
        }
        
        /* Estilos para el mapa interactivo */
        .interactive-map-container {
            position: relative;
            width: 100%;
            height: 600px;
            background: transparent !important;
            border-radius: 8px;
            overflow: hidden;
            border: none !important;
            margin: 0;
            padding: 0;
            box-shadow: none !important;
        }
        
        /* Ajustes responsivos para el mapa */
        @media (max-width: 1024px) {
            .interactive-map-container {
                height: 500px;
                border-radius: 6px;
                border: none !important;
                background: transparent !important;
                box-shadow: none !important;
            }
        }
        
        @media (max-width: 768px) {
            .interactive-map-container {
                height: 400px;
                border-radius: 0;
                border: none !important;
                background: transparent !important;
                box-shadow: none !important;
            }
        }
        
        .interactive-map-container svg {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .province-path {
            fill: var(--seafoam);
            stroke: var(--jungle-teal);
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .province-path:hover {
            fill: var(--palm-leaf);
            transform: scale(1.02);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        .comarca-path {
            fill: var(--sunset-coral);
            opacity: 0.8;
            stroke: var(--jungle-teal);
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .comarca-path:hover {
            fill: var(--sunset-coral);
            opacity: 1;
            transform: scale(1.02);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        /* Tarjeta dinámica */
        .dynamic-card {
            position: absolute;
            width: 350px;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideInRight 0.3s ease;
            pointer-events: none; /* Evitar que interfiera con el hover */
        }
        
        .dynamic-card-content {
            padding: 0;
        }
        
        .dynamic-card-header {
            position: relative;
        }
        
        .dynamic-card-header .pill {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }
        
        .dynamic-card-body {
            padding: 1.5rem;
        }
        
        .dynamic-card-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @media (max-width: 768px) {
            .section-nav {
                top: 70px;
            }
            
            .section-nav-list {
                gap: 1rem;
            }
            
            .nav-link {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .panama-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            .grid-2 {
                grid-template-columns: 1fr;
            }
            .dynamic-card {
                position: relative;
                top: auto;
                right: auto;
                width: 100%;
                margin-top: 1rem;
            }
            .interactive-map-container {
                height: 400px;
            }
        }
        
        @media (max-width: 480px) {
            .panama-stats {
                grid-template-columns: 1fr;
            }
        }
        
        /* Country Snapshot Styles */
        .country-snapshot-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .snapshot-card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid rgba(15, 91, 85, 0.1);
        }
        
        .snapshot-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .snapshot-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .snapshot-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--jungle-teal);
            font-family: var(--font-display);
            margin-bottom: 0.5rem;
        }
        
        .snapshot-label {
            color: var(--neutral-gray);
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        @media (max-width: 1024px) {
            .country-snapshot-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .country-snapshot-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .snapshot-card {
                padding: 1.5rem;
            }
        }
        
        /* Canal Timeline Styles */
        .canal-timeline-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 50%, #87CEEB 100%);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .canal-background {
            position: relative;
            height: 350px;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 50%, #87CEEB 100%);
            overflow: hidden;
        }
        
        .landscape-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 30%, #8FBC8F 60%, #98FB98 100%);
            z-index: 1;
        }
        
        .mountain-silhouette {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(180deg, transparent 0%, #8FBC8F 20%, #556B2F 100%);
            clip-path: polygon(0% 100%, 5% 80%, 15% 90%, 25% 70%, 35% 85%, 45% 75%, 55% 80%, 65% 70%, 75% 85%, 85% 75%, 95% 80%, 100% 100%);
            z-index: 2;
        }
        
        .ocean {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 15%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .pacific-ocean {
            left: 0;
            background: linear-gradient(135deg, #4682B4, #87CEEB);
        }
        
        .atlantic-ocean {
            right: 0;
            background: linear-gradient(135deg, #87CEEB, #4682B4);
        }
        
        .ocean-label {
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 1rem;
        }
        
        .ocean-surface {
            width: 100%;
            height: 30px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
            position: absolute;
            bottom: 0;
        }
        
        .canal-route {
            position: absolute;
            left: 10%;
            right: 10%;
            top: 45%;
            transform: translateY(-50%);
            height: 40px;
            background: linear-gradient(90deg, #4682B4, #87CEEB, #4682B4);
            border-radius: 20px;
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 3;
        }
        
        .canal-path {
            position: absolute;
            left: 2%;
            right: 2%;
            top: 50%;
            transform: translateY(-50%);
            height: 40px;
            background: linear-gradient(90deg, #4682B4, #87CEEB, #4682B4);
            border-radius: 20px;
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 3;
        }
        
        .canal-water {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, #4682B4, #87CEEB, #4682B4);
            border-radius: 30px;
            animation: waterFlow 3s ease-in-out infinite;
        }
        
        .gatum-lake {
            position: absolute;
            left: 25%;
            right: 25%;
            top: -40px;
            height: 120px;
            background: linear-gradient(90deg, #87CEEB, #98FB98, #87CEEB);
            border-radius: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 3;
        }
        
        .lake-label {
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 0.5rem;
        }
        
        .elevation-indicator {
            color: #FFD700;
            font-weight: 700;
            font-size: 0.8rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            background: rgba(0, 0, 0, 0.3);
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            border: 2px solid #FFD700;
        }
        
        .locks-section {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 1rem;
            transform: translateY(-50%);
        }
        
        .locks-pacific {
            position: absolute;
            left: 5%;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 0.5rem;
        }
        
        .locks-pedro-miguel {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            gap: 0.5rem;
        }
        
        .locks-atlantic {
            position: absolute;
            right: 5%;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 0.5rem;
        }
        
        .lock {
            width: 40px;
            height: 80px;
            background: #8B4513;
            border-radius: 6px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .lock.step-1 { height: 60px; }
        .lock.step-2 { height: 70px; }
        .lock.step-3 { height: 80px; }
        
        .lock-water {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, #4682B4, #87CEEB);
            transition: height 2s ease-in-out;
            height: 30px;
        }
        
        .lock-gates {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 20px;
            background: #654321;
            border-radius: 4px;
            z-index: 2;
            transition: all 1s ease-in-out;
            display: flex;
            gap: 2px;
        }
        
        .lock-gates::before,
        .lock-gates::after {
            content: '';
            position: absolute;
            top: 0;
            width: 13px;
            height: 20px;
            background: #654321;
            border-radius: 2px;
            transition: all 1s ease-in-out;
        }
        
        .lock-gates::before {
            left: 0;
        }
        
        .lock-gates::after {
            right: 0;
        }
        
        .lock.gates-closing .lock-gates::before {
            transform: translateX(-5px);
        }
        
        .lock.gates-closing .lock-gates::after {
            transform: translateX(5px);
        }
        
        .lock.gates-opening .lock-gates::before {
            transform: translateX(5px);
        }
        
        .lock.gates-opening .lock-gates::after {
            transform: translateX(-5px);
        }
        
        .lock.raising .lock-water {
            height: 60px;
        }
        
        .lock.lowering .lock-water {
            height: 15px;
        }
        
        .lock-labels {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 1rem;
            transform: translateY(-120px);
        }
        
        .lock-label {
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            white-space: nowrap;
        }
        
        .pacific-locks {
            text-align: left;
        }
        
        .pedro-miguel {
            text-align: center;
        }
        
        .atlantic-locks {
            text-align: right;
        }
        
        /* Deck Card Styles */
        .deck-card {
            position: relative;
            background: white;
            margin-top: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        .deck-card-content {
            padding: 2rem;
        }
        
        .deck-card .card-era {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: white;
        }
        
        .deck-card .card-year {
            color: var(--jungle-teal);
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }
        
        .deck-card h3 {
            color: var(--jungle-teal);
            margin-bottom: 1rem;
            font-family: var(--font-display);
            font-size: 1.5rem;
        }
        
        .deck-card p {
            color: var(--neutral-gray);
            line-height: 1.6;
            font-size: 1rem;
        }
        
        .canal-ship {
            position: absolute;
            top: 50%;
            left: 2%;
            transform: translateY(-50%);
            z-index: 10;
            transition: left 2s ease-in-out;
        }
        
        .ship-body {
            font-size: 2.5rem;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            animation: shipBob 2s ease-in-out infinite;
            transition: transform 0.3s ease;
        }
        
        .canal-ship.in-locks .ship-body {
            animation: shipBob 1.5s ease-in-out infinite;
        }
        
        .canal-ship.in-lake .ship-body {
            animation: shipBob 2.5s ease-in-out infinite;
            filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.4));
        }
        
        .canal-ship.in-lake .ship-wake {
            animation: wakeMove 0.8s linear infinite;
        }
        
        .ship-wake {
            position: absolute;
            top: 50%;
            left: -20px;
            transform: translateY(-50%);
            width: 30px;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            border-radius: 2px;
            animation: wakeMove 1s linear infinite;
        }
        
        .timeline-milestones {
            position: relative;
            margin-top: 4rem;
            left: 0;
            right: 0;
            height: 60px;
            z-index: 5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--radius-lg);
            padding: 1rem 2rem;
            box-shadow: var(--shadow-sm);
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        .timeline-milestones::-webkit-scrollbar {
            display: none;
        }
        
        .timeline-milestones::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 2rem;
            right: 2rem;
            height: 2px;
            background: linear-gradient(90deg, #8B4513, #2E8B57, #DC143C, #FF8C00, #4169E1);
            z-index: 1;
        }
        
        .milestone-dot {
            position: relative;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 6;
            flex-shrink: 0;
        }
        
        .milestone-dot.era-1 {
            background: #8B4513;
            border: 3px solid #A0522D;
        }
        
        .milestone-dot.era-2 {
            background: #2E8B57;
            border: 3px solid #3CB371;
        }
        
        .milestone-dot.era-3 {
            background: #DC143C;
            border: 3px solid #FF6347;
        }
        
        .milestone-dot.era-4 {
            background: #FF8C00;
            border: 3px solid #FFA500;
        }
        
        .milestone-dot.era-5 {
            background: #4169E1;
            border: 3px solid #6495ED;
        }
        
        .milestone-dot:hover {
            transform: scale(1.3);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }
        
        .milestone-dot.active {
            transform: scale(1.4);
            box-shadow: 0 0 25px rgba(255, 255, 255, 1);
        }
        
        .dot-glow {
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            background: inherit;
            opacity: 0;
            animation: pulse 2s infinite;
        }
        
        .milestone-dot.active .dot-glow {
            opacity: 0.6;
        }
        
        .milestone-tooltip {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        
        .milestone-dot:hover .milestone-tooltip {
            opacity: 1;
        }
        
        .tooltip-year {
            font-weight: 700;
            color: #FFD700;
        }
        
        .tooltip-title {
            font-size: 0.7rem;
            margin-top: 0.25rem;
        }
        
        .timeline-content {
            position: relative;
            background: white;
            padding: 2rem;
            min-height: 200px;
        }
        
        .timeline-card {
            display: none;
            animation: fadeInUp 0.5s ease;
        }
        
        .timeline-card.active {
            display: block;
        }
        
        .card-era {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: white;
        }
        
        .card-era.era-1 { background: #8B4513; }
        .card-era.era-2 { background: #2E8B57; }
        .card-era.era-3 { background: #DC143C; }
        .card-era.era-4 { background: #FF8C00; }
        .card-era.era-5 { background: #4169E1; }
        
        .card-year {
            color: var(--jungle-teal);
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }
        
        .timeline-card h3 {
            color: var(--jungle-teal);
            margin-bottom: 1rem;
            font-family: var(--font-display);
            font-size: 1.5rem;
        }
        
        .timeline-card p {
            color: var(--neutral-gray);
            line-height: 1.6;
            font-size: 1rem;
        }
        
        .timeline-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }
        
        /* Panama Canal Interactive Cross-Section Styles */
        .canal-interactive-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            align-items: start;
        }
        
        .canal-cross-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-md);
        }
        
        .cross-section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .canal-svg-container {
            width: 100%;
            height: 300px;
            overflow: visible;
        }
        
        .canal-svg {
            width: 100%;
            height: 100%;
        }
        
        .ocean-section {
            opacity: 0.8;
        }
        
        .ocean-label, .lake-label {
            font-size: 0.8rem;
            font-weight: 600;
            fill: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        /* Realistic lock styling tweaks */
        .lock-label { fill: #223; font-weight: 700; }
        .canal-svg .lock-gates { stroke: rgba(0,0,0,0.25); stroke-width: 0.8; }
        .canal-svg .lock-water { filter: url(#innerShadow); }
        .canal-svg .hotspot { stroke: #fff; stroke-width: 2; opacity: 0.9; }
        .canal-svg .hotspot:hover { transform: scale(1.15); transform-origin: center; opacity: 1; }
        
        .lock-group {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lock-group:hover {
            transform: scale(1.05);
        }
        
        .lock-structure {
            stroke: #654321;
            stroke-width: 2;
        }
        
        .lock-water {
            opacity: 0.8;
        }
        
        .lock-gates {
            stroke: #654321;
            stroke-width: 1;
        }
        
        .lock-label {
            font-size: 0.7rem;
            font-weight: 600;
            fill: #333;
        }
        
        .hotspot { cursor: pointer; }
        .hotspot[fill="transparent"] { stroke: none; opacity: 0; }
        .hotspot[fill="transparent"]:hover { opacity: 0.15; fill: #ffffff; }
        
        .canal-path {
            stroke-dasharray: 5,5;
            animation: canalFlow 3s linear infinite;
        }
        
        @keyframes canalFlow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: 20; }
        }
        
        .canal-stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .stat-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 0.25rem;
        }
        
        .stat-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--neutral-gray);
            margin-bottom: 0.5rem;
        }
        
        .stat-detail {
            font-size: 0.8rem;
            color: var(--neutral-light);
        }
        
        .global-trade-map {
            background: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
        }
        
        .trade-map-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .trade-routes {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .route {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: var(--radius-sm);
            background: var(--neutral-lightest);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .route:hover {
            background: var(--seafoam);
            transform: translateX(5px);
        }
        
        .route-icon {
            font-size: 1.5rem;
        }
        
        .route-label {
            font-weight: 600;
            color: var(--neutral-gray);
            flex: 1;
        }
        
        .route-detail {
            font-size: 0.8rem;
            color: var(--neutral-light);
        }
        
        /* Removed modal styles for simplified infographic */
        
        /* Tooltip Styles */
        .lock-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.8rem;
            z-index: 1000;
            pointer-events: none;
            white-space: nowrap;
            box-shadow: var(--shadow-lg);
        }
        
        .tooltip-name {
            font-weight: 600;
            color: #FFD700;
            margin-bottom: 0.25rem;
        }
        
        .tooltip-year {
            font-size: 0.7rem;
            color: #87CEEB;
            margin-bottom: 0.25rem;
        }
        
        .tooltip-fact {
            font-size: 0.7rem;
            color: #98FB98;
        }
        
        .control-btn {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: var(--jungle-teal);
        }
        
        .control-btn:hover {
            background: white;
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        
        @keyframes waterFlow {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(10px); }
        }
        
        @keyframes shipBob {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        @keyframes wakeMove {
            0% { opacity: 0; transform: translateX(-10px); }
            50% { opacity: 1; }
            100% { opacity: 0; transform: translateX(10px); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.2); opacity: 0.3; }
            100% { transform: scale(1); opacity: 0.6; }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 768px) {
            .canal-background {
                height: 250px;
            }
            
            .ocean {
                width: 12%;
            }
            
            .ocean-label {
                font-size: 0.9rem;
            }
            
            .lock-label {
                font-size: 0.6rem;
            }
            
            .timeline-content {
                padding: 1.5rem;
            }
            
            .timeline-card h3 {
                font-size: 1.3rem;
            }
            
            .timeline-milestones {
                left: 0;
                right: 0;
                padding: 0.5rem 1rem;
            }
            
            .timeline-milestones::before {
                left: 1rem;
                right: 1rem;
            }
            
            .milestone-dot {
                width: 18px;
                height: 18px;
            }
            
            .timeline-controls {
                top: 10px;
                right: 10px;
            }
            
            .canal-interactive-container {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .canal-stats-grid {
                grid-template-columns: 1fr 1fr;
                gap: 0.75rem;
            }
            
            .stat-card {
                padding: 1rem;
            }
            
            .stat-number {
                font-size: 1.5rem;
            }
            
            .canal-svg-container {
                height: 250px;
            }
            
            .trade-routes {
                gap: 0.5rem;
            }
            
            .route {
                padding: 0.5rem;
            }
            
            .control-btn {
                width: 35px;
                height: 35px;
            }
        }
        
        /* Canal Infographic Styles */
        .canal-infographic {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }
        
        .canal-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }
        
        .canal-stat-card {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(15, 91, 85, 0.1);
            transition: transform 0.3s ease;
        }
        
        .canal-stat-card:hover {
            transform: translateY(-4px);
        }
        
        .canal-stat-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .canal-stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--jungle-teal);
            font-family: var(--font-display);
            margin-bottom: 0.5rem;
        }
        
        .canal-stat-label {
            color: var(--neutral-gray);
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .canal-animation {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .canal-visual {
            position: relative;
            height: 200px;
            background: linear-gradient(90deg, #87CEEB 0%, #4682B4 50%, #87CEEB 100%);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }
        
        .canal-water {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, #87CEEB 0%, #4682B4 50%, #87CEEB 100%);
            animation: waterFlow 3s ease-in-out infinite;
        }
        
        .ship-animation {
            position: absolute;
            top: 50%;
            left: -50px;
            transform: translateY(-50%);
            animation: shipMove 8s linear infinite;
        }
        
        .ship {
            font-size: 2rem;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }
        
        .canal-locks {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding: 0 2rem;
        }
        
        .lock {
            width: 40px;
            height: 60px;
            background: #8B4513;
            border-radius: 4px;
            position: relative;
        }
        
        .lock::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: #654321;
            border-radius: 50%;
        }
        
        .canal-description h3 {
            color: var(--jungle-teal);
            margin-bottom: 1rem;
            font-family: var(--font-display);
        }
        
        .canal-description p {
            color: var(--neutral-gray);
            line-height: 1.6;
        }
        
        @keyframes waterFlow {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(10px); }
        }
        
        @keyframes shipMove {
            0% { left: -50px; }
            100% { left: calc(100% + 50px); }
        }
        
        @media (max-width: 1024px) {
            .canal-infographic {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .canal-stats {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .canal-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .canal-visual {
                height: 150px;
            }
        }
        
        /* Demographics & Cultural Diversity Styles */
        .cultural-diversity-section {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            margin-top: 2rem;
        }
        
        /* Pie Chart Styles */
        .pie-chart-container {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            margin: 2rem 0;
            text-align: center;
        }
        
        .pie-chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--jungle-teal);
            margin-bottom: 1rem;
            font-family: var(--font-display);
        }
        
        .pie-chart-wrapper {
            position: relative;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .pie-chart-legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 14px;
            font-weight: 500;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .chart-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .stat-box {
            background: var(--seafoam);
            padding: 1rem;
            border-radius: var(--radius-md);
            text-align: center;
        }
        
        .stat-percentage {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--jungle-teal);
            font-family: var(--font-display);
        }
        
        .stat-population {
            font-size: 0.9rem;
            color: var(--neutral-gray);
            margin-top: 0.25rem;
        }
        
        @media (max-width: 768px) {
            .cultural-section {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .pie-chart-wrapper {
                max-width: 300px;
            }
            
            .chart-stats {
                grid-template-columns: 1fr;
            }
        }
        
        .cultural-diversity h3,
        .national-symbols h3 {
            color: var(--jungle-teal);
            margin-bottom: 2rem;
            font-family: var(--font-display);
            text-align: center;
        }
        
        .cultural-map {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
        }
        
        
        
        /* National Symbols Slider Styles */
        .symbols-slider-container {
            position: relative;
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .symbols-slider {
            display: flex;
            overflow: hidden;
            gap: 1rem;
            scroll-behavior: smooth;
            flex: 1;
        }
        
        .symbol-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 200px;
            flex-shrink: 0;
        }
        
        .symbol-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }
        
        .symbol-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
        }
        
        .symbol-name {
            color: var(--jungle-teal);
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .symbol-preview {
            color: var(--text-muted);
            font-size: 0.85rem;
            font-style: italic;
        }
        
        .slider-btn {
            background: var(--jungle-teal);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slider-btn:hover {
            background: var(--ocean-blue);
            transform: scale(1.1);
        }
        
        .slider-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
        }
        
        .slider-dots {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .dot.active {
            background: var(--jungle-teal);
            transform: scale(1.2);
        }
        
        .dot:hover {
            background: var(--ocean-blue);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            font-weight: bold;
            color: var(--text-muted);
            cursor: pointer;
            z-index: 1001;
        }
        
        .modal-close:hover {
            color: var(--jungle-teal);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--jungle-teal), var(--ocean-blue));
            color: white;
            padding: 2rem;
            text-align: center;
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
        }
        
        .modal-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .modal-image {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-image img {
            max-width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
        }
        
        .modal-description p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }
        
        .modal-facts {
            background: var(--seafoam);
            padding: 1rem;
            border-radius: var(--radius-md);
            border-left: 4px solid var(--jungle-teal);
        }
        
        .modal-facts h4 {
            color: var(--jungle-teal);
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }
        
        .modal-facts ul {
            margin: 0;
            padding-left: 1.2rem;
        }
        
        .modal-facts li {
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }
        
        @media (max-width: 1024px) {
            .cultural-diversity-section {
                margin-top: 1.5rem;
                padding: 1.5rem;
            }
        }
        
        @media (max-width: 768px) {
            .symbols-slider {
                gap: 0.75rem;
            }
            
            .symbol-card {
                min-width: 160px;
                padding: 1rem;
            }
            
            .symbol-icon {
                font-size: 2rem;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
            
            .modal-header {
                padding: 1.5rem;
            }
            
            .modal-body {
                padding: 1.5rem;
            }
        }
        
        /* Biodiversity Flora & Fauna Styles */
        .biodiversity-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-bottom: 2rem;
        }
        
        .biodiversity-column {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .column-title {
            font-size: 1.5rem;
            color: var(--jungle-teal);
            margin-bottom: 2rem;
            text-align: center;
            border-bottom: 2px solid var(--seafoam);
            padding-bottom: 1rem;
        }
        
        .species-category {
            margin-bottom: 2rem;
        }
        
        .category-title {
            font-size: 1.2rem;
            color: var(--ocean-blue);
            margin-bottom: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: var(--seafoam);
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
        }
        
        .category-title:hover {
            background: var(--jungle-teal);
            color: white;
        }
        
        .expand-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .category-title.active .expand-icon {
            transform: rotate(45deg);
        }
        
        .species-list {
            display: none;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .species-list.active {
            display: flex;
        }
        
        .species-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--seafoam);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .species-item:hover {
            background: white;
            border-left-color: var(--jungle-teal);
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }
        
        .species-info {
            flex: 1;
        }
        
        .species-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .species-scientific {
            font-style: italic;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }
        
        .species-status {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            font-weight: 500;
        }
        
        .species-status.native {
            background: var(--ocean-blue);
            color: white;
        }
        
        .species-status.endemic {
            background: var(--jungle-teal);
            color: white;
        }
        
        .species-image {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-md);
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .species-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Mobile Accordion Styles */
        @media (max-width: 768px) {
            .biodiversity-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .biodiversity-column {
                padding: 1.5rem;
            }
            
            .species-item {
                padding: 0.75rem;
            }
            
            .species-image {
                width: 50px;
                height: 50px;
            }
        }
        
        /* Festivals Accordion Styles */
        .festivals-accordion {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .month-accordion {
            background: white;
            border-radius: var(--radius-lg);
            margin-bottom: 1rem;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }
        
        .month-header {
            background: var(--jungle-teal);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .month-header:hover {
            background: var(--ocean-blue);
        }
        
        .month-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }
        
        .expand-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }
        
        .month-header.active .expand-icon {
            transform: rotate(45deg);
        }
        
        .month-content {
            display: none;
            padding: 2rem;
        }
        
        .month-content.active {
            display: block;
        }
        
        .holidays-section, .festivals-section {
            margin-bottom: 2rem;
        }
        
        .holidays-section:last-child, .festivals-section:last-child {
            margin-bottom: 0;
        }
        
        .section-title {
            font-size: 1.2rem;
            color: var(--jungle-teal);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--seafoam);
        }
        
        .holidays-list, .festivals-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .holiday-item, .festival-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: var(--seafoam);
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .holiday-item:hover, .festival-item:hover {
            background: white;
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }
        
        .holiday-date, .festival-dates {
            font-weight: 600;
            color: var(--ocean-blue);
            min-width: 120px;
            font-size: 0.9rem;
        }
        
        .holiday-name, .festival-info {
            flex: 1;
            margin-left: 1rem;
        }
        
        .festival-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .festival-location {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .no-holidays, .no-festivals {
            text-align: center;
            color: var(--text-muted);
            font-style: italic;
            padding: 2rem;
            background: var(--seafoam);
            border-radius: var(--radius-md);
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            .month-header {
                padding: 1rem;
            }
            
            .month-title {
                font-size: 1.25rem;
            }
            
            .month-content {
                padding: 1.5rem;
            }
            
            .holiday-item, .festival-item {
                padding: 0.75rem;
                flex-direction: column;
                align-items: flex-start;
            }
            
            .holiday-date, .festival-dates {
                min-width: auto;
                margin-bottom: 0.5rem;
            }
            
            .holiday-name, .festival-info {
                margin-left: 0;
            }
        }
        
        .species-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: transform 0.3s ease;
        }
        
        .species-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }
        
        .species-image {
            height: 200px;
            overflow: hidden;
        }
        
        .species-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .species-card:hover .species-image img {
            transform: scale(1.05);
        }
        
        .species-info {
            padding: 1.5rem;
        }
        
        .species-info h3 {
            color: var(--jungle-teal);
            margin-bottom: 0.5rem;
            font-family: var(--font-display);
        }
        
        .species-info p {
            color: var(--neutral-gray);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        @media (max-width: 768px) {
            .biodiversity-carousel {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .biodiversity-carousel {
                grid-template-columns: 1fr;
            }
        }
        
        /* Festivals Calendar Styles */
        .festivals-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .festival-calendar {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }
        
        .calendar-header {
            background: linear-gradient(135deg, var(--jungle-teal), var(--ocean-blue));
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .calendar-header h3 {
            margin-bottom: 1rem;
            font-family: var(--font-display);
        }
        
        .calendar-legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .legend-color.cultural {
            background: #FF6B6B;
        }
        
        .legend-color.religious {
            background: #4ECDC4;
        }
        
        .legend-color.agricultural {
            background: #45B7D1;
        }
        
        .calendar-months {
            padding: 2rem;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .month-section {
            margin-bottom: 2rem;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 1.5rem;
        }
        
        .month-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .month-title {
            color: var(--jungle-teal);
            font-family: var(--font-display);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .festival-events {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .festival-event {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .festival-event.cultural {
            background: rgba(255, 107, 107, 0.1);
            border-left-color: #FF6B6B;
        }
        
        .festival-event.religious {
            background: rgba(78, 205, 196, 0.1);
            border-left-color: #4ECDC4;
        }
        
        .festival-event.agricultural {
            background: rgba(69, 183, 209, 0.1);
            border-left-color: #45B7D1;
        }
        
        .festival-event:hover {
            transform: translateX(8px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .event-date {
            font-weight: 700;
            color: var(--jungle-teal);
            min-width: 80px;
            font-size: 0.9rem;
        }
        
        .event-info {
            flex: 1;
        }
        
        .event-name {
            font-weight: 600;
            color: var(--jungle-teal);
            margin-bottom: 0.25rem;
        }
        
        .event-location {
            color: var(--neutral-gray);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .calendar-legend {
                gap: 1rem;
            }
            
            .festival-event {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .event-date {
                min-width: auto;
            }
        }
        
        /* Photo Gallery Styles */
        .photo-mosaic {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .photo-item {
            position: relative;
            overflow: hidden;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .photo-item.large {
            grid-column: span 2;
            grid-row: span 2;
        }
        
        .photo-item:hover {
            transform: scale(1.02);
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .photo-item:hover img {
            transform: scale(1.1);
        }
        
        /* Lightbox Styles */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
        }
        
        .lightbox-content {
            position: relative;
            margin: auto;
            padding: 0;
            width: 90%;
            max-width: 1200px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .lightbox-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .lightbox-close:hover {
            color: var(--jungle-teal);
        }
        
        #lightboxImage {
            width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
        }
        
        .lightbox-caption {
            color: white;
            text-align: center;
            padding: 1rem;
            font-size: 1.1rem;
        }
        
        /* Conversion Deck Styles */
        .province-exploration,
        .content-carousel {
            margin-bottom: 3rem;
        }
        
        .province-exploration h3,
        .content-carousel h3 {
            color: var(--jungle-teal);
            margin-bottom: 2rem;
            font-family: var(--font-display);
            text-align: center;
        }
        
        .province-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .province-mini-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .province-mini-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .province-mini-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .province-mini-card h4 {
            padding: 1rem;
            text-align: center;
            color: var(--jungle-teal);
            font-family: var(--font-display);
            margin: 0;
        }
        
        .content-slider {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .content-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: transform 0.3s ease;
        }
        
        .content-card:hover {
            transform: translateY(-4px);
        }
        
        .content-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .content-info {
            padding: 1.5rem;
        }
        
        .content-info h4 {
            color: var(--jungle-teal);
            margin-bottom: 0.5rem;
            font-family: var(--font-display);
        }
        
        .content-info p {
            color: var(--neutral-gray);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }
        
        @media (max-width: 1024px) {
            .photo-mosaic {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .photo-mosaic {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .photo-item.large {
                grid-column: span 2;
                grid-row: span 1;
            }
            
            .province-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .content-slider {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .photo-mosaic {
                grid-template-columns: 1fr;
            }
            
            .photo-item.large {
                grid-column: span 1;
            }
        }
        
        /* Newsletter CTA Styles */
        .newsletter-cta {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            align-items: center;
        }
        
        .newsletter-form {
            max-width: 500px;
        }
        
        .newsletter-input-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .newsletter-input-group input {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
        }
        
        .newsletter-input-group input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: all 0.3s ease;
        }
        
        .social-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .newsletter-cta {
                grid-template-columns: 1fr;
                gap: 2rem;
                text-align: center;
            }
            
            .newsletter-input-group {
                flex-direction: column;
            }
            
            .social-links {
                justify-content: center;
            }
        }
        
        /* ===== CALENDAR STYLES ===== */
        .calendar-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .month-panel {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .month-panel:hover {
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        .month-header {
            background: linear-gradient(135deg, var(--jungle-teal) 0%, var(--ocean-blue) 100%);
            color: white;
            padding: 1.5rem 2rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .month-header:hover {
            background: linear-gradient(135deg, var(--ocean-blue) 0%, var(--jungle-teal) 100%);
        }
        
        .month-header h3 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .month-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .month-panel.active .month-toggle {
            transform: rotate(180deg);
        }
        
        .month-content {
            padding: 2rem;
            display: none;
        }
        
        .month-panel.active .month-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .holiday-category, .festival-category {
            margin-bottom: 2rem;
        }
        
        .holiday-category h4, .festival-category h4 {
            color: var(--jungle-teal);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
            border-bottom: 2px solid var(--seafoam);
            padding-bottom: 0.5rem;
        }
        
        .holiday-list, .festival-list {
            display: grid;
            gap: 0.75rem;
        }
        
        .holiday-item, .festival-item {
            background: var(--shell-light);
            border-radius: var(--radius-md);
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid var(--jungle-teal);
            position: relative;
        }
        
        .holiday-item:hover, .festival-item:hover {
            background: var(--seafoam);
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(15, 91, 85, 0.1);
        }
        
        .holiday-item {
            border-left-color: var(--ocean-blue);
        }
        
        .holiday-item:hover {
            border-left-color: var(--jungle-teal);
        }
        
        .holiday-date, .festival-dates {
            font-weight: 600;
            color: var(--jungle-teal);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }
        
        .holiday-name, .festival-name {
            font-weight: 500;
            color: var(--ink);
            margin-bottom: 0.25rem;
        }
        
        .festival-location {
            color: var(--neutral-gray);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        /* Tooltip styles */
        .holiday-item[data-tooltip], .festival-item[data-tooltip] {
            position: relative;
        }
        
        .holiday-item[data-tooltip]:hover::after,
        .festival-item[data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--deep-reef);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.85rem;
            white-space: nowrap;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: tooltipFadeIn 0.3s ease;
        }
        
        .holiday-item[data-tooltip]:hover::before,
        .festival-item[data-tooltip]:hover::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--deep-reef);
            z-index: 1000;
        }
        
        @keyframes tooltipFadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(5px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .month-header {
                padding: 1rem 1.5rem;
            }
            
            .month-content {
                padding: 1.5rem;
            }
            
            .holiday-item, .festival-item {
                padding: 0.75rem 1rem;
            }
            
            .holiday-item[data-tooltip]:hover::after,
            .festival-item[data-tooltip]:hover::after {
                display: none; /* Hide tooltips on mobile */
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">Local From Bocas</a>
            <nav>
                <ul class="navbar-nav">
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="servicios.html">Servicios</a></li>
                    <li><a href="vlogs.html">Vlogs</a></li>
                    <li><a href="panama.html" class="active">Panamá</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Section Navigation -->
    <nav class="section-nav" id="sectionNav" role="navigation" aria-label="Page sections">
        <div class="section-nav-container">
            <div class="section-nav-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <ul class="section-nav-list" role="list">
                <li role="listitem">
                    <a href="#hero" class="nav-link active" aria-current="page">
                        <span class="nav-link-text">Overview</span>
                        <span class="sr-only">Current section</span>
                    </a>
                </li>
                <li role="listitem">
                    <a href="#interactive-map" class="nav-link">
                        <span class="nav-link-text">Map</span>
                    </a>
                </li>
                <li role="listitem">
                    <a href="#country-snapshot" class="nav-link">
                        <span class="nav-link-text">Facts</span>
                    </a>
                </li>
                <li role="listitem">
                    <a href="#canal-timeline" class="nav-link">
                        <span class="nav-link-text">Canal</span>
                    </a>
                </li>
                <li role="listitem">
                    <a href="#demographics" class="nav-link">
                        <span class="nav-link-text">Culture</span>
                    </a>
                </li>
                <li role="listitem">
                    <a href="#biodiversity" class="nav-link">
                        <span class="nav-link-text">Nature</span>
                    </a>
                </li>
                <li role="listitem">
                    <a href="#festivals" class="nav-link">
                        <span class="nav-link-text">Events</span>
                    </a>
                </li>
                <li role="listitem">
                    <a href="#calendar" class="nav-link">
                        <span class="nav-link-text">Calendar</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="hero" style="height: 25vh; min-height: 200px;">
        <div class="hero-content">
            <div class="pill mb-md">🇵🇦 Descubre Panamá</div>
            <h1>La Riqueza de un País Completo</h1>
            <p class="body-large">Explora las 10 provincias y 3 comarcas indígenas que conforman la diversidad cultural y natural de Panamá</p>
        </div>
    </section>

    <!-- Mapa Interactivo - Primera Sección -->
    <section id="interactive-map">
        <div class="full-width-map-container">
            <div class="interactive-map-container" id="panamaMap" role="img" aria-label="Interactive map showing Panama's provinces and comarcas" tabindex="0">
                <!-- El mapa SVG se generará dinámicamente con JavaScript -->
            </div>
            
            <!-- Tarjeta dinámica que aparece al hacer hover -->
            <div id="dynamicCard" class="dynamic-card" style="display: none;">
                <div class="dynamic-card-content">
                    <div class="dynamic-card-header">
                        <img id="dynamicCardImage" src="" alt="" style="width: 100%; height: 200px; object-fit: cover; border-radius: var(--radius-md);">
                        <div class="pill" id="dynamicCardPill">🏝️ Región</div>
                    </div>
                    <div class="dynamic-card-body">
                        <h3 id="dynamicCardTitle">Título</h3>
                        <p id="dynamicCardDescription">Descripción de la región...</p>
                        <div class="dynamic-card-highlights" id="dynamicCardHighlights">
                            <!-- Los highlights se llenarán dinámicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Map Instructions -->
        <div class="map-instructions" aria-live="polite">
            <p>Use your mouse to hover over regions or keyboard to navigate. Press Enter to select a region.</p>
        </div>
    </section>

    <!-- Country Snapshot - Segunda Sección -->
    <section class="section" id="country-snapshot">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Un País de Contrastes y Belleza</h2>
                <p class="body-large mb-lg">Panamá es mucho más que su famoso canal. Es un país que conecta dos océanos y dos continentes, creando una diversidad única de ecosistemas, culturas y tradiciones. Desde las playas caribeñas de Bocas del Toro hasta las montañas de Chiriquí, cada región ofrece experiencias únicas e inolvidables.</p>
            </div>
            
            <!-- Country Snapshot Cards -->
            <div class="grid grid--3-cols">
                <div class="card card--stat interactive-element">
                    <div class="card-icon">👥</div>
                    <div class="card-number">4.3M</div>
                    <div class="card-label">Población (2023)</div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">🏛️</div>
                    <div class="card-number">13</div>
                    <div class="card-label">Provincias & Comarcas</div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">🏙️</div>
                    <div class="card-number">Ciudad de Panamá</div>
                    <div class="card-label">Capital</div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">🗣️</div>
                    <div class="card-number">Español</div>
                    <div class="card-label">Idioma Oficial</div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">💵</div>
                    <div class="card-number">Balboa</div>
                    <div class="card-label">Moneda</div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">🕐</div>
                    <div class="card-content">
                        <div class="card-number">UTC-5</div>
                        <div class="card-label">Zona Horaria</div>
                    </div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">🌿</div>
                    <div class="card-number">25%</div>
                    <div class="card-label">Territorio Protegido</div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">🌊</div>
                    <div class="card-number">2</div>
                    <div class="card-label">Océanos</div>
                </div>
                <div class="card card--stat interactive-element">
                    <div class="card-icon">🏗️</div>
                    <div class="card-number">1914</div>
                    <div class="card-label">Canal Inaugurado</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Canal Timeline -->
    <section class="section" id="canal-timeline" style="background-color: var(--seafoam);">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Historia de Panamá: Un Viaje por el Canal del Tiempo</h2>
                <p class="body-large">Navega a través de la historia de Panamá mientras el barco recorre el Canal de Pacífico a Atlántico</p>
            </div>
            
            <div class="canal-timeline-container">
                <!-- Canal Background -->
                <div class="canal-background">
                    <div class="landscape-background"></div>
                    <div class="mountain-silhouette"></div>
                    
                    <div class="ocean pacific-ocean">
                        <div class="ocean-label">Océano Pacífico</div>
                        <div class="ocean-surface"></div>
                    </div>
                    
                    <div class="canal-path"></div>
                    
                    <div class="canal-route">
                        <div class="canal-water"></div>
                        <div class="gatum-lake">
                            <div class="lake-label">Lago Gatún</div>
                            <div class="elevation-indicator">26m</div>
                        </div>
                        <div class="locks-section">
                            <!-- Pacific Side - Miraflores Locks -->
                            <div class="locks-pacific">
                                <div class="lock step-1">
                                    <div class="lock-water"></div>
                                    <div class="lock-gates"></div>
                                </div>
                                <div class="lock step-1">
                                    <div class="lock-water"></div>
                                    <div class="lock-gates"></div>
                                </div>
                            </div>
                            
                            <!-- Pedro Miguel Lock -->
                            <div class="locks-pedro-miguel">
                                <div class="lock step-2">
                                    <div class="lock-water"></div>
                                    <div class="lock-gates"></div>
                                </div>
                            </div>
                            
                            <!-- Atlantic Side - Gatún Locks -->
                            <div class="locks-atlantic">
                                <div class="lock step-1">
                                    <div class="lock-water"></div>
                                    <div class="lock-gates"></div>
                                </div>
                                <div class="lock step-2">
                                    <div class="lock-water"></div>
                                    <div class="lock-gates"></div>
                                </div>
                                <div class="lock step-3">
                                    <div class="lock-water"></div>
                                    <div class="lock-gates"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Lock Labels -->
                        <div class="lock-labels">
                            <div class="lock-label pacific-locks">Esclusas de Miraflores</div>
                            <div class="lock-label pedro-miguel">Pedro Miguel</div>
                            <div class="lock-label atlantic-locks">Esclusas de Gatún</div>
                        </div>
                    </div>
                    
                    <div class="ocean atlantic-ocean">
                        <div class="ocean-label">Océano Atlántico</div>
                        <div class="ocean-surface"></div>
                    </div>
                </div>
                
                <!-- Animated Ship -->
                <div class="canal-ship" id="canalShip">
                    <div class="ship-body">🚢</div>
                    <div class="ship-wake"></div>
                </div>
                
                <!-- Timeline Milestones Control Bar -->
                <div class="timeline-milestones" id="timelineMilestones">
                    <!-- Milestones will be generated by JavaScript -->
                </div>
                
                <!-- Deck Card -->
                <div class="deck-card" id="deckCard">
                    <div class="deck-card-content">
                        <div class="card-era" id="cardEra">Era Pre-Colombina</div>
                        <div class="card-year" id="cardYear">c. 10,000 BCE</div>
                        <h3 id="cardTitle">Los Primeros Pueblos del Istmo</h3>
                        <p id="cardDescription">Los pueblos indígenas establecieron las primeras rutas de comercio a través del istmo, creando una red de intercambio que conectaba las culturas del Pacífico y el Caribe mucho antes de la llegada de los europeos.</p>
                    </div>
                </div>
                
                <!-- Timeline Controls -->
                <div class="timeline-controls">
                    <button class="control-btn" id="playTimeline">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="pauseTimeline">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="resetTimeline">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Panama Canal: Data & Analysis -->
    <section class="section">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>El Canal de Panamá: Datos y Análisis</h2>
                <p class="body-large">Métricas clave del canal más importante del mundo</p>
            </div>
            
            <!-- Key Metrics Dashboard -->
            <div class="canal-stats-grid mb-xxl">
                    <div class="stat-card" data-stat="ships">
                        <div class="stat-icon">🚢</div>
                        <div class="stat-number" id="shipsCounter">0</div>
                        <div class="stat-label">Barcos por Año</div>
                    <div class="stat-detail">14,000 transits</div>
                    </div>
                    <div class="stat-card" data-stat="tonnage">
                        <div class="stat-icon">📦</div>
                        <div class="stat-number" id="tonnageCounter">0</div>
                        <div class="stat-label">Toneladas</div>
                    <div class="stat-detail">500M toneladas</div>
                    </div>
                    <div class="stat-card" data-stat="economic">
                        <div class="stat-icon">💰</div>
                        <div class="stat-number">6%</div>
                        <div class="stat-label">Comercio Mundial</div>
                        <div class="stat-detail">del tráfico marítimo</div>
                    </div>
                    <div class="stat-card" data-stat="time">
                        <div class="stat-icon">⏱️</div>
                        <div class="stat-number">8-10</div>
                        <div class="stat-label">Horas de Cruce</div>
                    <div class="stat-detail">vs 2 semanas Cabo Hornos</div>
                    </div>
                </div>
                
            <!-- Top Users by Country -->
            <div class="canal-data-section mb-xxl">
                <h3 class="text-center mb-lg">🌍 Principales Usuarios por País</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <div class="country-flag">🇺🇸</div>
                        <div class="country-name">Estados Unidos</div>
                        <div class="country-percentage">73%</div>
                        <div class="country-detail">Bienes hacia/desde EE.UU.</div>
                        </div>
                    <div class="data-item">
                        <div class="country-flag">🇨🇳</div>
                        <div class="country-name">China</div>
                        <div class="country-percentage">21%</div>
                        <div class="country-detail">Segundo mayor usuario</div>
                        </div>
                    <div class="data-item">
                        <div class="country-flag">🇯🇵</div>
                        <div class="country-name">Japón</div>
                        <div class="country-percentage">15%</div>
                        <div class="country-detail">Importaciones de energía</div>
                        </div>
                    <div class="data-item">
                        <div class="country-flag">🇨🇱</div>
                        <div class="country-name">Chile</div>
                        <div class="country-percentage">10%</div>
                        <div class="country-detail">Principal usuario latinoamericano</div>
                    </div>
                    <div class="data-item">
                        <div class="country-flag">🇰🇷</div>
                        <div class="country-name">Corea del Sur</div>
                        <div class="country-percentage">9%</div>
                        <div class="country-detail">Socio comercial asiático</div>
                    </div>
                </div>
            </div>

            <!-- Cargo by Segment -->
            <div class="canal-data-section mb-xxl">
                <h3 class="text-center mb-lg">📦 Carga por Segmento</h3>
                <div class="cargo-grid">
                    <div class="cargo-item">
                        <div class="cargo-icon">📦</div>
                        <div class="cargo-name">Contenedores</div>
                        <div class="cargo-percentage">35%</div>
                        <div class="cargo-detail">Bienes terminados</div>
                    </div>
                    <div class="cargo-item">
                        <div class="cargo-icon">🌾</div>
                        <div class="cargo-name">Carga Seca</div>
                        <div class="cargo-percentage">22%</div>
                        <div class="cargo-detail">Granos, minerales, carbón</div>
                    </div>
                    <div class="cargo-item">
                        <div class="cargo-icon">🧪</div>
                        <div class="cargo-name">Quimiqueros</div>
                        <div class="cargo-percentage">16%</div>
                        <div class="cargo-detail">Productos químicos</div>
                    </div>
                    <div class="cargo-item">
                        <div class="cargo-icon">⛽</div>
                        <div class="cargo-name">LNG & LPG</div>
                        <div class="cargo-percentage">14%</div>
                        <div class="cargo-detail">Gas natural y petróleo</div>
                    </div>
                    <div class="cargo-item">
                        <div class="cargo-icon">🚗</div>
                        <div class="cargo-name">Vehículos</div>
                        <div class="cargo-percentage">6%</div>
                        <div class="cargo-detail">Autos y camiones</div>
                    </div>
                    <div class="cargo-item">
                        <div class="cargo-icon">🛢️</div>
                        <div class="cargo-name">Petroleros</div>
                        <div class="cargo-percentage">7%</div>
                        <div class="cargo-detail">Crudo y derivados</div>
                    </div>
                </div>
            </div>

            <!-- Vessel Types & Tolls -->
            <div class="canal-data-section mb-xxl">
                <h3 class="text-center mb-lg">🚢 Tipos de Barcos y Peajes</h3>
                
                <!-- Historical Construction Context -->
                <div class="construction-context">
                    <div class="construction-note">
                        <div class="construction-icon">🏗️</div>
                        <div class="construction-text">
                            <strong>Esclusas Panamax:</strong> Construidas por Estados Unidos (1904-1914)<br>
                            <strong>Esclusas Neo-Panamax:</strong> Construidas completamente por Panamá (2007-2016)
                        </div>
                    </div>
                </div>
                
                <div class="vessel-comparison">
                    <div class="vessel-type">
                        <div class="vessel-icon">🚢</div>
                        <div class="vessel-name">Neo-Panamax</div>
                        <div class="vessel-stats">
                            <div class="stat">55% transitos</div>
                            <div class="stat">75% tonelaje</div>
                        </div>
                        <div class="vessel-detail">Nuevas esclusas expandidas</div>
                    </div>
                    <div class="vessel-type">
                        <div class="vessel-icon">⛵</div>
                        <div class="vessel-name">Panamax</div>
                        <div class="vessel-stats">
                            <div class="stat">45% transitos</div>
                            <div class="stat">Menor tonelaje</div>
                        </div>
                        <div class="vessel-detail">Tamaño original máximo</div>
                    </div>
                </div>
                <div class="toll-info">
                    <div class="toll-average">💰 Promedio: $250,000</div>
                    <div class="toll-maximum">💎 Máximo: $1.2M+</div>
                </div>
            </div>

            <!-- Drought Impact -->
            <div class="canal-data-section">
                <h3 class="text-center mb-lg">💧 Impacto de la Sequía</h3>
                <div class="drought-impact">
                    <div class="drought-item">
                        <div class="drought-icon">💧</div>
                        <div class="drought-title">Niveles de Agua</div>
                        <div class="drought-detail">Lago Gatún: <strong>80 pies</strong> (normal: 89 pies)</div>
                    </div>
                    <div class="drought-item">
                        <div class="drought-icon">📉</div>
                        <div class="drought-title">Transitos Diarios</div>
                        <div class="drought-detail">De <strong>36-38</strong> a <strong>22</strong> barcos</div>
                    </div>
                    <div class="drought-item">
                        <div class="drought-icon">⏳</div>
                        <div class="drought-title">Tiempos de Espera</div>
                        <div class="drought-detail">De <strong>5-7 días</strong> a <strong>20+ días</strong></div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Demographics & Cultural Diversity -->
    <section class="section" id="demographics">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Demographics & Cultural Diversity</h2>
                <p class="body-large">Population growth, distribution, and ethnic composition of Panama</p>
            </div>
            
            <!-- Population Timeline -->
            <div class="population-timeline mb-xxl">
                <h3 class="text-center mb-lg">📈 Population Growth</h3>
                <div class="timeline-context">
                    <p class="context-note">*Data from 1911 corresponds to the first official census conducted in Panama</p>
                </div>
                <div class="timeline-stats">
                    <div class="timeline-item">
                        <div class="year">1911*</div>
                        <div class="population">336,742</div>
                        <div class="growth">First census</div>
                    </div>
                    <div class="timeline-item">
                        <div class="year">2023</div>
                        <div class="population">4,064,780</div>
                        <div class="growth">+12x</div>
                    </div>
                </div>
            </div>

            <!-- Gender Distribution -->
            <div class="gender-distribution mb-xxl">
                <h3 class="text-center mb-lg">👨‍👩‍👧‍👦 Gender Distribution</h3>
                <div class="gender-stats">
                    <div class="gender-card male">
                        <div class="gender-number">2,014,818</div>
                        <div class="gender-label">Male (49.6%)</div>
                    </div>
                    <div class="gender-card female">
                        <div class="gender-number">2,049,962</div>
                        <div class="gender-label">Female (50.4%)</div>
                    </div>
                </div>
            </div>

            <!-- Provincial Distribution -->
            <div class="provincial-population mb-xxl">
                <h3 class="text-center mb-lg">🏛️ Provincial and Comarca Distribution</h3>
                <div class="province-grid">
                    <div class="province-item">
                        <div class="province-name">Panamá</div>
                        <div class="province-population">1,439,575</div>
                        <div class="province-percentage">35.4%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Panamá Oeste</div>
                        <div class="province-population">653,665</div>
                        <div class="province-percentage">16.1%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Chiriquí</div>
                        <div class="province-population">471,071</div>
                        <div class="province-percentage">11.6%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Colón</div>
                        <div class="province-population">281,956</div>
                        <div class="province-percentage">6.9%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Coclé</div>
                        <div class="province-population">268,264</div>
                        <div class="province-percentage">6.6%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Veraguas</div>
                        <div class="province-population">259,791</div>
                        <div class="province-percentage">6.4%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Bocas del Toro</div>
                        <div class="province-population">159,228</div>
                        <div class="province-percentage">3.9%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Herrera</div>
                        <div class="province-population">122,071</div>
                        <div class="province-percentage">3.0%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Los Santos</div>
                        <div class="province-population">98,466</div>
                        <div class="province-percentage">2.4%</div>
                    </div>
                    <div class="province-item">
                        <div class="province-name">Darién</div>
                        <div class="province-population">54,235</div>
                        <div class="province-percentage">1.3%</div>
                    </div>
                    <div class="province-item comarca-item">
                        <div class="province-name">Ngäbe Buglé</div>
                        <div class="province-population">212,084</div>
                        <div class="province-percentage">5.2%</div>
                    </div>
                    <div class="province-item comarca-item">
                        <div class="province-name">Kuna Yala</div>
                        <div class="province-population">32,016</div>
                        <div class="province-percentage">0.8%</div>
                    </div>
                    <div class="province-item comarca-item">
                        <div class="province-name">Emberá-Wounaan</div>
                        <div class="province-population">12,358</div>
                        <div class="province-percentage">0.3%</div>
                    </div>
                </div>
            </div>

            <!-- Ethnic Distribution -->
            <div class="ethnic-distribution mb-xxl">
                <h3 class="text-center mb-lg">🌍 Distribución Étnica</h3>
                <div class="ethnic-overview">
                    <div class="ethnic-group afrodescendant">
                        <div class="ethnic-number">1,286,857</div>
                        <div class="ethnic-label">Afrodescendientes (31.7%)</div>
                    </div>
                    <div class="ethnic-group indigenous">
                        <div class="ethnic-number">698,114</div>
                        <div class="ethnic-label">Indígenas (17.2%)</div>
                    </div>
                </div>
            </div>


            <!-- Indigenous Groups -->
            <div class="indigenous-groups mb-xxl">
                <h3 class="text-center mb-lg">👥 Grupos Indígenas</h3>
                <div class="indigenous-grid">
                    <div class="indigenous-group">
                        <div class="group-name">Ngäbe</div>
                        <div class="group-population">444,878</div>
                        <div class="group-percentage">64.9%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Kuna</div>
                        <div class="group-population">112,319</div>
                        <div class="group-percentage">16.4%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Emberá</div>
                        <div class="group-population">51,657</div>
                        <div class="group-percentage">7.5%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Buglé</div>
                        <div class="group-population">23,898</div>
                        <div class="group-percentage">3.5%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Wounaan</div>
                        <div class="group-population">10,634</div>
                        <div class="group-percentage">1.6%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Naso</div>
                        <div class="group-population">5,568</div>
                        <div class="group-percentage">0.8%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Teribe</div>
                        <div class="group-population">1,331</div>
                        <div class="group-percentage">0.2%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Bri Bri</div>
                        <div class="group-population">766</div>
                        <div class="group-percentage">0.1%</div>
                    </div>
                    <div class="indigenous-group">
                        <div class="group-name">Bokota</div>
                        <div class="group-population">590</div>
                        <div class="group-percentage">0.1%</div>
                    </div>
                </div>
            </div>

            <!-- Cultural Diversity -->
            <div class="cultural-diversity-section">
                <h3 class="text-center mb-lg">🌍 Cultural Diversity</h3>
                <div class="pie-chart-container">
                    <div class="pie-chart-title">Panama's Ethnic Composition (2023)</div>
                    <div class="pie-chart-wrapper">
                        <canvas id="culturalDiversityChart" width="400" height="400"></canvas>
                    </div>
                    
                    <!-- Legend -->
                    <div class="pie-chart-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #8DBB66;"></div>
                            <span>Mestizo Majority (51.1%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #2C8AC6;"></div>
                            <span>Afro-descendants (31.7%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #0F5B55;"></div>
                            <span>Indigenous Peoples (17.2%)</span>
                        </div>
                    </div>
                    
                    <!-- Statistics Boxes -->
                    <div class="chart-stats">
                        <div class="stat-box">
                            <div class="stat-percentage">51.1%</div>
                            <div class="stat-population">2,079,809 people</div>
                            <div style="font-size: 0.8rem; color: var(--jungle-teal); margin-top: 0.5rem;">Mestizo Majority</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-percentage">31.7%</div>
                            <div class="stat-population">1,286,857 people</div>
                            <div style="font-size: 0.8rem; color: var(--ocean-blue); margin-top: 0.5rem;">Afro-descendants</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-percentage">17.2%</div>
                            <div class="stat-population">698,114 people</div>
                            <div style="font-size: 0.8rem; color: var(--jungle-teal); margin-top: 0.5rem;">Indigenous Peoples</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- National Symbols -->
    <section class="section" style="background-color: var(--seafoam);">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>National Symbols</h2>
                <p class="body-large">Rich traditions and symbols that represent our national identity</p>
            </div>
            
            <!-- National Symbols Slider -->
            <div class="national-symbols">
                    <div class="symbols-slider-container">
                        <button class="slider-btn prev-btn" aria-label="Previous symbol">‹</button>
                        <div class="symbols-slider">
                            <div class="symbol-card" data-symbol="flag">
                                <div class="symbol-icon">🏴</div>
                                <div class="symbol-name">Flag</div>
                                <div class="symbol-preview">Click to learn more</div>
                            </div>
                            <div class="symbol-card" data-symbol="anthem">
                                <div class="symbol-icon">🎵</div>
                                <div class="symbol-name">National Anthem</div>
                                <div class="symbol-preview">Click to learn more</div>
                            </div>
                            <div class="symbol-card" data-symbol="coat">
                                <div class="symbol-icon">🛡️</div>
                                <div class="symbol-name">Coat of Arms</div>
                                <div class="symbol-preview">Click to learn more</div>
                            </div>
                            <div class="symbol-card" data-symbol="eagle">
                                <div class="symbol-icon">🦅</div>
                                <div class="symbol-name">Harpy Eagle</div>
                                <div class="symbol-preview">Click to learn more</div>
                            </div>
                            <div class="symbol-card" data-symbol="orchid">
                                <div class="symbol-icon">🌸</div>
                                <div class="symbol-name">Holy Spirit Orchid</div>
                                <div class="symbol-preview">Click to learn more</div>
                            </div>
                        </div>
                        <button class="slider-btn next-btn" aria-label="Next symbol">›</button>
                    </div>
                    <div class="slider-dots">
                        <span class="dot active" data-slide="0"></span>
                        <span class="dot" data-slide="1"></span>
                        <span class="dot" data-slide="2"></span>
                        <span class="dot" data-slide="3"></span>
                        <span class="dot" data-slide="4"></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Biodiversity: Flora & Fauna -->
    <section class="section" id="biodiversity">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Biodiversity of Panama: Flora & Fauna</h2>
                <p class="body-large">Panama is a biodiversity hotspot, home to a wide variety of native and endemic species of mammals, birds, amphibians, reptiles, marine life, trees, and plants. This incredible diversity makes Panama one of the most biologically rich countries in the world.</p>
            </div>
            
            <div class="biodiversity-container">
                <!-- Fauna Column -->
                <div class="biodiversity-column fauna-column">
                    <h3 class="column-title">🦎 Fauna</h3>
                    
                    <!-- Mammals -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="mammals">🐒 Mammals <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="mammals">
                            <div class="species-item" data-species="coiba-howler">
                                <div class="species-info">
                                    <div class="species-name">Coiba Howler Monkey</div>
                                    <div class="species-scientific">Alouatta coibensis</div>
                                    <div class="species-status endemic">Endemic to Coiba Island</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Coiba Howler Monkey">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="agouti">
                                <div class="species-info">
                                    <div class="species-name">Central American Agouti</div>
                                    <div class="species-scientific">Dasyprocta punctata</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Central American Agouti">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="pygmy-sloth">
                                <div class="species-info">
                                    <div class="species-name">Pygmy Three-toed Sloth</div>
                                    <div class="species-scientific">Bradypus pygmaeus</div>
                                    <div class="species-status endemic">Endemic to Escudo de Veraguas</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Pygmy Three-toed Sloth">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="jaguar">
                                <div class="species-info">
                                    <div class="species-name">Jaguar</div>
                                    <div class="species-scientific">Panthera onca</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Jaguar">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="puma">
                                <div class="species-info">
                                    <div class="species-name">Puma / Cougar</div>
                                    <div class="species-scientific">Puma concolor</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Puma">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="kinkajou">
                                <div class="species-info">
                                    <div class="species-name">Kinkajou</div>
                                    <div class="species-scientific">Potos flavus</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Kinkajou">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="tamandua">
                                <div class="species-info">
                                    <div class="species-name">Tamandua / Lesser Anteater</div>
                                    <div class="species-scientific">Tamandua mexicana</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Tamandua">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Birds -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="birds">🦅 Birds <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="birds">
                            <div class="species-item" data-species="scarlet-macaw">
                                <div class="species-info">
                                    <div class="species-name">Scarlet Macaw</div>
                                    <div class="species-scientific">Ara macao</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Scarlet Macaw">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="quetzal">
                                <div class="species-info">
                                    <div class="species-name">Resplendent Quetzal</div>
                                    <div class="species-scientific">Pharomachrus mocinno</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Resplendent Quetzal">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="harpy-eagle">
                                <div class="species-info">
                                    <div class="species-name">Harpy Eagle</div>
                                    <div class="species-scientific">Harpia harpyja</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Harpy Eagle">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="escudo-hummingbird">
                                <div class="species-info">
                                    <div class="species-name">Escudo Hummingbird</div>
                                    <div class="species-scientific">Amazilia handleyi</div>
                                    <div class="species-status endemic">Endemic to Escudo de Veraguas</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Escudo Hummingbird">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="manakin">
                                <div class="species-info">
                                    <div class="species-name">Golden-collared Manakin</div>
                                    <div class="species-scientific">Manacus vitellinus amitinus</div>
                                    <div class="species-status endemic">Endemic to Escudo de Veraguas</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Golden-collared Manakin">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Amphibians -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="amphibians">🐸 Amphibians <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="amphibians">
                            <div class="species-item" data-species="golden-frog">
                                <div class="species-info">
                                    <div class="species-name">Panamanian Golden Frog</div>
                                    <div class="species-scientific">Atelopus zeteki</div>
                                    <div class="species-status endemic">Endemic</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Panamanian Golden Frog">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="oedipina">
                                <div class="species-info">
                                    <div class="species-name">Oedipina maritima</div>
                                    <div class="species-scientific">Oedipina maritima</div>
                                    <div class="species-status endemic">Endemic to Escudo de Veraguas</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Oedipina maritima">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reptiles -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="reptiles">🐍 Reptiles <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="reptiles">
                            <div class="species-item" data-species="crocodile">
                                <div class="species-info">
                                    <div class="species-name">American Crocodile</div>
                                    <div class="species-scientific">Crocodylus acutus</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="American Crocodile">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="fer-de-lance">
                                <div class="species-info">
                                    <div class="species-name">Terciopelo / Fer-de-lance</div>
                                    <div class="species-scientific">Bothrops asper</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Fer-de-lance">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="green-turtle">
                                <div class="species-info">
                                    <div class="species-name">Green Sea Turtle</div>
                                    <div class="species-scientific">Chelonia mydas</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Green Sea Turtle">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Marine/Aquatic -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="marine">🐠 Marine/Aquatic <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="marine">
                            <div class="species-item" data-species="corals">
                                <div class="species-info">
                                    <div class="species-name">Corals (various species)</div>
                                    <div class="species-scientific">Various species</div>
                                    <div class="species-status native">Native to Panamanian coasts</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Corals">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="parrotfish">
                                <div class="species-info">
                                    <div class="species-name">Rainbow Parrotfish</div>
                                    <div class="species-scientific">Scarus guacamaia</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Rainbow Parrotfish">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="conch">
                                <div class="species-info">
                                    <div class="species-name">Queen Conch</div>
                                    <div class="species-scientific">Lobatus gigas</div>
                                    <div class="species-status native">Native to Caribbean coast</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Queen Conch">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Flora Column -->
                <div class="biodiversity-column flora-column">
                    <h3 class="column-title">🌿 Flora</h3>
                    
                    <!-- Trees -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="trees">🌳 Trees <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="trees">
                            <div class="species-item" data-species="gumbo-limbo">
                                <div class="species-info">
                                    <div class="species-name">Gumbo-limbo</div>
                                    <div class="species-scientific">Bursera simaruba</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Gumbo-limbo">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="star-apple">
                                <div class="species-info">
                                    <div class="species-name">Caimito / Star Apple</div>
                                    <div class="species-scientific">Chrysophyllum cainito</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Star Apple">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="brownea">
                                <div class="species-info">
                                    <div class="species-name">Brownea macrophylla</div>
                                    <div class="species-scientific">Brownea macrophylla</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Brownea macrophylla">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="wild-cashew">
                                <div class="species-info">
                                    <div class="species-name">Marañón / Wild Cashew</div>
                                    <div class="species-scientific">Caryocar costaricense</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Wild Cashew">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="cecropia">
                                <div class="species-info">
                                    <div class="species-name">Cecropia peltata</div>
                                    <div class="species-scientific">Cecropia peltata</div>
                                    <div class="species-status native">Native pioneer tree</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Cecropia peltata">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Plants/Shrubs -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="plants">🌱 Plants/Shrubs <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="plants">
                            <div class="species-item" data-species="achiote">
                                <div class="species-info">
                                    <div class="species-name">Achiote / Annatto</div>
                                    <div class="species-scientific">Bixa orellana</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Achiote">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="hoja-santa">
                                <div class="species-info">
                                    <div class="species-name">Hoja Santa</div>
                                    <div class="species-scientific">Piper auritum</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Hoja Santa">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="cacao">
                                <div class="species-info">
                                    <div class="species-name">Cacao</div>
                                    <div class="species-scientific">Theobroma cacao</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Cacao">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="heliconia">
                                <div class="species-info">
                                    <div class="species-name">Heliconia collinsiana</div>
                                    <div class="species-scientific">Heliconia collinsiana</div>
                                    <div class="species-status native">Native, ornamental</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Heliconia">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="zamia">
                                <div class="species-info">
                                    <div class="species-name">Zamia hamannii</div>
                                    <div class="species-scientific">Zamia hamannii</div>
                                    <div class="species-status endemic">Endemic to Escudo de Veraguas</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Zamia hamannii">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mangroves -->
                    <div class="species-category">
                        <h4 class="category-title" data-category="mangroves">🌊 Mangroves <span class="expand-icon">+</span></h4>
                        <div class="species-list" id="mangroves">
                            <div class="species-item" data-species="red-mangrove">
                                <div class="species-info">
                                    <div class="species-name">Red Mangrove</div>
                                    <div class="species-scientific">Rhizophora mangle</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Red Mangrove">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="black-mangrove">
                                <div class="species-info">
                                    <div class="species-name">Black Mangrove</div>
                                    <div class="species-scientific">Avicennia germinans</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="Black Mangrove">
                                </div>
                            </div>
                            
                            <div class="species-item" data-species="white-mangrove">
                                <div class="species-info">
                                    <div class="species-name">White Mangrove</div>
                                    <div class="species-scientific">Laguncularia racemosa</div>
                                    <div class="species-status native">Native</div>
                                </div>
                                <div class="species-image">
                                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&q=80" alt="White Mangrove">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </section>

    <!-- Festivals and Celebrations -->
    <section class="section" id="festivals" style="background-color: var(--seafoam);">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Festivals and Celebrations</h2>
                <p class="body-large">Discover Panama's rich cultural traditions through its vibrant festivals, fairs, and celebrations throughout the year</p>
            </div>
            
            <div class="festivals-accordion">
                <div class="festival-calendar">
                    <div class="calendar-header">
                        <h3>Calendario de Festivales 2024</h3>
                        <div class="calendar-legend">
                            <div class="legend-item">
                                <div class="legend-color cultural"></div>
                                <span>Cultural</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color religious"></div>
                                <span>Religioso</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color agricultural"></div>
                                <span>Agrícola</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calendar-months">
                        <!-- January -->
                        <div class="month-section">
                            <h4 class="month-title">Enero</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">3-7 Ene</div>
                                    <div class="event-info">
                                        <div class="event-name">Encuentro Folklórico del Canajagua y Fiesta de Reyes</div>
                                        <div class="event-location">📍 Macaracas, Los Santos</div>
                                    </div>
                                </div>
                                <div class="festival-event agricultural">
                                    <div class="event-date">8-19 Ene</div>
                                    <div class="event-info">
                                        <div class="event-name">Feria de las Flores y del Café</div>
                                        <div class="event-location">📍 Boquete, Chiriquí</div>
                                    </div>
                                </div>
                                <div class="festival-event cultural">
                                    <div class="event-date">11 Ene</div>
                                    <div class="event-info">
                                        <div class="event-name">Desfile de las Mil Polleras</div>
                                        <div class="event-location">📍 Las Tablas, Los Santos</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- February -->
                        <div class="month-section">
                            <h4 class="month-title">Febrero</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">12-16 Feb</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival Folklórico Internacional del Almojábano con Queso</div>
                                        <div class="event-location">📍 Dolega, Chiriquí</div>
                                    </div>
                                </div>
                                <div class="festival-event cultural">
                                    <div class="event-date">1-4 Mar</div>
                                    <div class="event-info">
                                        <div class="event-name">Carnavales</div>
                                        <div class="event-location">📍 Todo el País</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- March -->
                        <div class="month-section">
                            <h4 class="month-title">Marzo</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">1-2 Mar</div>
                                    <div class="event-info">
                                        <div class="event-name">Gran Feria Afroantillana</div>
                                        <div class="event-location">📍 Ciudad de Panamá</div>
                                    </div>
                                </div>
                                <div class="festival-event cultural">
                                    <div class="event-date">13-16 Mar</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival de la Cumbia Chorrerana</div>
                                        <div class="event-location">📍 La Chorrera, Panamá Oeste</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- April -->
                        <div class="month-section">
                            <h4 class="month-title">Abril</h4>
                            <div class="festival-events">
                                <div class="festival-event agricultural">
                                    <div class="event-date">2-6 Abr</div>
                                    <div class="event-info">
                                        <div class="event-name">Feria de Veraguas</div>
                                        <div class="event-location">📍 Soná, Veraguas</div>
                                    </div>
                                </div>
                                <div class="festival-event agricultural">
                                    <div class="event-date">10-13 Abr</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival Nacional de la Caña de Azúcar</div>
                                        <div class="event-location">📍 Coclé</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- June -->
                        <div class="month-section">
                            <h4 class="month-title">Junio</h4>
                            <div class="festival-events">
                                <div class="festival-event religious">
                                    <div class="event-date">14-29 Jun</div>
                                    <div class="event-info">
                                        <div class="event-name">Fiesta del Corpus Christi</div>
                                        <div class="event-location">📍 La Villa, Los Santos</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- July -->
                        <div class="month-section">
                            <h4 class="month-title">Julio</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">19-23 Jul</div>
                                    <div class="event-info">
                                        <div class="event-name">Fiestas Patronales de Santa Librada & Festival Nacional de la Pollera</div>
                                        <div class="event-location">📍 Las Tablas, Los Santos</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- August -->
                        <div class="month-section">
                            <h4 class="month-title">Agosto</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">14-17 Ago</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival Nacional del Manito</div>
                                        <div class="event-location">📍 Ocú, Herrera</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- September -->
                        <div class="month-section">
                            <h4 class="month-title">Septiembre</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">5-8 Sep</div>
                                    <div class="event-info">
                                        <div class="event-name">Feria de Chiriquí Grande</div>
                                        <div class="event-location">📍 Bocas del Toro</div>
                                    </div>
                                </div>
                                <div class="festival-event cultural">
                                    <div class="event-date">20-28 Sep</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival Nacional de la Mejorana</div>
                                        <div class="event-location">📍 Guararé, Los Santos</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- October -->
                        <div class="month-section">
                            <h4 class="month-title">Octubre</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">2-5 Oct</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival del Sombrero de Junco</div>
                                        <div class="event-location">📍 Los Santos</div>
                                    </div>
                                </div>
                                <div class="festival-event cultural">
                                    <div class="event-date">15-19 Oct</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival Nacional del Toro Guapo</div>
                                        <div class="event-location">📍 Antón, Coclé</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- November -->
                        <div class="month-section">
                            <h4 class="month-title">Noviembre</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">3-5 Nov</div>
                                    <div class="event-info">
                                        <div class="event-name">Festival Folklórico de la Pollera Veragüense</div>
                                        <div class="event-location">📍 Soná, Veraguas</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- December -->
                        <div class="month-section">
                            <h4 class="month-title">Diciembre</h4>
                            <div class="festival-events">
                                <div class="festival-event cultural">
                                    <div class="event-date">25 Dic</div>
                                    <div class="event-info">
                                        <div class="event-name">El Topón de La Pintada</div>
                                        <div class="event-location">📍 La Pintada, Coclé</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Panama Festival & Holiday Calendar 2025 -->
    <section class="section" id="calendar" style="background: linear-gradient(135deg, var(--shell-light) 0%, var(--seafoam) 100%);">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Panama Festival & Holiday Calendar 2025</h2>
                <p class="body-large">Discover all official holidays and major festivals across Panama by month</p>
            </div>
            
            <!-- Calendar Container -->
            <div class="calendar-container" role="region" aria-label="Festival and holiday calendar">
                <!-- January 2025 -->
                <div class="month-panel active" 
                     data-month="january" 
                     role="tabpanel" 
                     aria-labelledby="january-tab"
                     id="january-panel">
                    <div class="month-header" 
                         role="button" 
                         tabindex="0" 
                         aria-expanded="true"
                         aria-controls="january-content"
                         id="january-tab"
                         class="focusable">
                        <h3>January 2025</h3>
                        <div class="month-toggle" aria-hidden="true">
                            <span class="toggle-icon">▼</span>
                        </div>
                    </div>
                    
                    <div class="month-content">
                        <!-- Official Holidays -->
                        <div class="holiday-category">
                            <h4>Official Holidays</h4>
                            <div class="holiday-list">
                                <div class="holiday-item" data-tooltip="New Year's Day - National holiday">
                                    <div class="holiday-date">Jan 1 (Wed)</div>
                                    <div class="holiday-name">New Year's Day</div>
                                </div>
                                <div class="holiday-item" data-tooltip="Martyrs' Day - Commemorates the 1964 Flag Riots">
                                    <div class="holiday-date">Jan 9 (Thu)</div>
                                    <div class="holiday-name">Martyrs' Day</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Festivals & Ferias -->
                        <div class="festival-category">
                            <h4>Festivals / Ferias / Fiestas</h4>
                            <div class="festival-list">
                                <div class="festival-item" data-tooltip="Encuentro Folklórico del Canajagua y Fiesta de Reyes - Macaracas, Los Santos">
                                    <div class="festival-dates">Jan 3–7</div>
                                    <div class="festival-name">Encuentro Folklórico del Canajagua y Fiesta de Reyes</div>
                                    <div class="festival-location">📍 Macaracas, Los Santos</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria de las Flores y del Café - Boquete, Chiriquí">
                                    <div class="festival-dates">Jan 8–19</div>
                                    <div class="festival-name">Feria de las Flores y del Café</div>
                                    <div class="festival-location">📍 Boquete, Chiriquí</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Desfile de las Mil Polleras - Las Tablas, Los Santos">
                                    <div class="festival-dates">Jan 11</div>
                                    <div class="festival-name">Desfile de las Mil Polleras</div>
                                    <div class="festival-location">📍 Las Tablas, Los Santos</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria de San Sebastián de Ocú - Ocú, Herrera">
                                    <div class="festival-dates">Jan 15–20</div>
                                    <div class="festival-name">Feria de San Sebastián de Ocú</div>
                                    <div class="festival-location">📍 Ocú, Herrera</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria de Pixvae - Pixvae de Las Palmas, Veraguas">
                                    <div class="festival-dates">Jan 16–18</div>
                                    <div class="festival-name">Feria de Pixvae</div>
                                    <div class="festival-location">📍 Pixvae de Las Palmas, Veraguas</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria del Sombrero Pintao - Las Minas de Tulú de Penonomé, Coclé">
                                    <div class="festival-dates">Jan 17–19</div>
                                    <div class="festival-name">Feria del Sombrero Pintao</div>
                                    <div class="festival-location">📍 Las Minas de Tulú de Penonomé, Coclé</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria Internacional de La Chorrera - La Chorrera, Panamá Oeste">
                                    <div class="festival-dates">Jan 22–Feb 2</div>
                                    <div class="festival-name">Feria Internacional de La Chorrera</div>
                                    <div class="festival-location">📍 La Chorrera, Panamá Oeste</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria de la Sandía - Calobre, Veraguas">
                                    <div class="festival-dates">Jan 24–26</div>
                                    <div class="festival-name">Feria de la Sandía</div>
                                    <div class="festival-location">📍 Calobre, Veraguas</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria de La Candelaria - Concepción, Chiriquí">
                                    <div class="festival-dates">Jan 29–Feb 2</div>
                                    <div class="festival-name">Feria de La Candelaria</div>
                                    <div class="festival-location">📍 Concepción, Chiriquí</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria de la Naranja - Churuquita Grande de Penonomé, Coclé">
                                    <div class="festival-dates">Jan 29–Feb 2</div>
                                    <div class="festival-name">Feria de la Naranja</div>
                                    <div class="festival-location">📍 Churuquita Grande de Penonomé, Coclé</div>
                                </div>
                                
                                <div class="festival-item" data-tooltip="Feria de los Postres - San Francisco de la Montaña, Veraguas">
                                    <div class="festival-dates">Jan 30–Feb 2</div>
                                    <div class="festival-name">Feria de los Postres</div>
                                    <div class="festival-location">📍 San Francisco de la Montaña, Veraguas</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Provincias (Oculto - reemplazado por mapa interactivo) -->
    <section class="section" style="background-color: var(--seafoam); display: none;">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Las 10 Provincias de Panamá</h2>
                <p class="body-large">Cada provincia tiene su propia identidad, cultura y atractivos únicos</p>
            </div>
            
            <div class="grid grid-2">
                <!-- Bocas del Toro -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/0F5B55/FFFFFF?text=Bocas+del+Toro" alt="Bocas del Toro" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏝️ Caribe</div>
                    </div>
                    <div class="province-content">
                        <h3>Bocas del Toro</h3>
                        <p>Conocida como "Las Galápagos del Siglo XXI", esta provincia caribeña alberga una biodiversidad excepcional y una rica cultura afrocaribeña.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌊 Archipiélago único</span>
                            <span class="pill-light">🌿 Biodiversidad excepcional</span>
                            <span class="pill-light">🎭 Cultura afrocaribeña</span>
                        </div>
                        <a href="panama/bocas-del-toro.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Chiriquí -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/8DBB66/FFFFFF?text=Chiriqui" alt="Chiriquí" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏔️ Tierras Altas</div>
                    </div>
                    <div class="province-content">
                        <h3>Chiriquí</h3>
                        <p>La "Suiza de Panamá" con sus tierras altas, volcanes y clima templado. Cuna de la agricultura de altura y el ecoturismo.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌋 Volcán Barú</span>
                            <span class="pill-light">☕ Café de altura</span>
                            <span class="pill-light">🌲 Bosques nubosos</span>
                        </div>
                        <a href="panama/chiriqui.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Coclé -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/FF7466/FFFFFF?text=Cocle" alt="Coclé" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏖️ Pacífico Central</div>
                    </div>
                    <div class="province-content">
                        <h3>Coclé</h3>
                        <p>Corazón geográfico de Panamá con playas del Pacífico, montañas y una rica tradición cultural que incluye el famoso Carnaval de Penonomé.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🎭 Carnaval tradicional</span>
                            <span class="pill-light">🏖️ Playas del Pacífico</span>
                            <span class="pill-light">🏔️ Cordillera Central</span>
                        </div>
                        <a href="panama/cocle.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Colón -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/2C8AC6/FFFFFF?text=Colon" alt="Colón" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🚢 Zona Libre</div>
                    </div>
                    <div class="province-content">
                        <h3>Colón</h3>
                        <p>Puerta de entrada del Caribe con la Zona Libre de Colón, fortificaciones coloniales y playas caribeñas vírgenes.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🏰 Fortificaciones coloniales</span>
                            <span class="pill-light">🛒 Zona Libre</span>
                            <span class="pill-light">🏝️ Islas caribeñas</span>
                        </div>
                        <a href="panama/colon.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Darién -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/5B4B3F/FFFFFF?text=Darien" alt="Darién" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌿 Selva Virgen</div>
                    </div>
                    <div class="province-content">
                        <h3>Darién</h3>
                        <p>La provincia más salvaje de Panamá con selvas vírgenes, comunidades indígenas y el famoso Tapón del Darién.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌳 Selva virgen</span>
                            <span class="pill-light">👥 Comunidades indígenas</span>
                            <span class="pill-light">🦜 Biodiversidad única</span>
                        </div>
                        <a href="panama/darien.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Herrera -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/8DBB66/FFFFFF?text=Herrera" alt="Herrera" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌾 Azuero</div>
                    </div>
                    <div class="province-content">
                        <h3>Herrera</h3>
                        <p>Corazón de la Península de Azuero con tradiciones folclóricas, artesanías y una rica herencia cultural española.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🎭 Folclor tradicional</span>
                            <span class="pill-light">🏺 Artesanías</span>
                            <span class="pill-light">🌾 Tradición ganadera</span>
                        </div>
                        <a href="panama/herrera.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Los Santos -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/FF7466/FFFFFF?text=Los+Santos" alt="Los Santos" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🎭 Folclor</div>
                    </div>
                    <div class="province-content">
                        <h3>Los Santos</h3>
                        <p>Cuna del folclor panameño con el famoso Festival de la Mejorana, tradiciones centenarias y hermosas playas del Pacífico.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🎪 Festival de la Mejorana</span>
                            <span class="pill-light">🏖️ Playas del Pacífico</span>
                            <span class="pill-light">🎭 Folclor auténtico</span>
                        </div>
                        <a href="panama/los-santos.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Panamá -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/0F5B55/FFFFFF?text=Panama" alt="Panamá" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏙️ Capital</div>
                    </div>
                    <div class="province-content">
                        <h3>Panamá</h3>
                        <p>La capital del país con el Casco Antiguo, rascacielos modernos, el Canal de Panamá y una vibrante vida urbana.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🏗️ Canal de Panamá</span>
                            <span class="pill-light">🏛️ Casco Antiguo</span>
                            <span class="pill-light">🌆 Vida urbana</span>
                        </div>
                        <a href="panama/panama.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Panamá Oeste -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/2C8AC6/FFFFFF?text=Panama+Oeste" alt="Panamá Oeste" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌊 Pacífico</div>
                    </div>
                    <div class="province-content">
                        <h3>Panamá Oeste</h3>
                        <p>La provincia más joven con hermosas playas del Pacífico, desarrollo urbano y acceso directo a la capital.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🏖️ Playas del Pacífico</span>
                            <span class="pill-light">🏘️ Desarrollo urbano</span>
                            <span class="pill-light">🌊 Acceso al mar</span>
                        </div>
                        <a href="panama/panama-oeste.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Veraguas -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/5B4B3F/FFFFFF?text=Veraguas" alt="Veraguas" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌊 Dos Mares</div>
                    </div>
                    <div class="province-content">
                        <h3>Veraguas</h3>
                        <p>La única provincia con costas en ambos océanos, rica en historia colonial y hermosos paisajes naturales.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌊 Caribe y Pacífico</span>
                            <span class="pill-light">🏰 Historia colonial</span>
                            <span class="pill-light">🏔️ Paisajes naturales</span>
                        </div>
                        <a href="panama/veraguas.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Comarcas Indígenas (Oculto - reemplazado por mapa interactivo) -->
    <section class="section" style="display: none;">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Las 3 Comarcas Indígenas</h2>
                <p class="body-large">Territorios autónomos que preservan las culturas ancestrales de Panamá</p>
            </div>
            
            <div class="grid grid-3">
                <!-- Guna Yala -->
                <div class="comarca-card">
                    <div class="comarca-header">
                        <img src="https://via.placeholder.com/400x250/0F5B55/FFFFFF?text=Guna+Yala" alt="Guna Yala" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏝️ Caribe</div>
                    </div>
                    <div class="comarca-content">
                        <h3>Guna Yala</h3>
                        <p>Comarca autónoma en el Caribe con 365 islas, cultura guna preservada y hermosas playas vírgenes.</p>
                        <div class="comarca-highlights">
                            <span class="pill-light">🏝️ 365 islas</span>
                            <span class="pill-light">🎨 Molas tradicionales</span>
                            <span class="pill-light">🌊 Aguas cristalinas</span>
                        </div>
                        <a href="panama/guna-yala.html" class="btn btn-primary">Explorar Comarca</a>
                    </div>
                </div>

                <!-- Emberá-Wounaan -->
                <div class="comarca-card">
                    <div class="comarca-header">
                        <img src="https://via.placeholder.com/400x250/8DBB66/FFFFFF?text=Embera-Wounaan" alt="Emberá-Wounaan" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌿 Selva</div>
                    </div>
                    <div class="comarca-content">
                        <h3>Emberá-Wounaan</h3>
                        <p>Comarca en la selva del Darién que preserva las tradiciones de los pueblos emberá y wounaan.</p>
                        <div class="comarca-highlights">
                            <span class="pill-light">🌳 Selva tropical</span>
                            <span class="pill-light">🎨 Artesanías en madera</span>
                            <span class="pill-light">🏹 Tradiciones ancestrales</span>
                        </div>
                        <a href="panama/embera-wounaan.html" class="btn btn-primary">Explorar Comarca</a>
                    </div>
                </div>

                <!-- Ngäbe-Buglé -->
                <div class="comarca-card">
                    <div class="comarca-header">
                        <img src="https://via.placeholder.com/400x250/FF7466/FFFFFF?text=Ngabe-Bugle" alt="Ngäbe-Buglé" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏔️ Tierras Altas</div>
                    </div>
                    <div class="comarca-content">
                        <h3>Ngäbe-Buglé</h3>
                        <p>La comarca más grande de Panamá en las tierras altas, hogar de los pueblos ngäbe y buglé.</p>
                        <div class="comarca-highlights">
                            <span class="pill-light">🏔️ Tierras altas</span>
                            <span class="pill-light">☕ Cultivo de café</span>
                            <span class="pill-light">🎭 Tradiciones vivas</span>
                        </div>
                        <a href="panama/ngabe-bugle.html" class="btn btn-primary">Explorar Comarca</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section" style="background: linear-gradient(135deg, var(--jungle-teal) 0%, var(--ocean-blue) 100%); color: white;">
        <div class="container text-center">
            <h2 style="color: white;">¿Listo para Explorar Panamá?</h2>
            <p class="body-large" style="color: rgba(255,255,255,0.9); margin-bottom: 2rem;">Comienza tu aventura en Bocas del Toro y descubre la diversidad de todo el país.</p>
            <div class="hero-actions">
                <a href="servicios.html" class="btn" style="background: white; color: var(--jungle-teal);">Nuestros Servicios</a>
                <a href="contacto.html" class="btn btn-secondary" style="border-color: white; color: white;">Planificar Viaje</a>
            </div>
        </div>
    </section>

    <!-- Newsletter CTA Section -->
    <section class="section" style="background: linear-gradient(135deg, var(--jungle-teal) 0%, var(--ocean-blue) 100%); color: white;">
        <div class="container">
            <div class="newsletter-cta">
                <div class="newsletter-content">
                    <h2 style="color: white; margin-bottom: 1rem;">Mantente Conectado</h2>
                    <p style="color: rgba(255,255,255,0.9); margin-bottom: 2rem;">Recibe las últimas noticias sobre Panamá, festivales y ofertas especiales directamente en tu correo.</p>
                    
                    <form class="newsletter-form" id="newsletterForm">
                        <div class="newsletter-input-group">
                            <input type="email" placeholder="Tu correo electrónico" required>
                            <button type="submit" class="btn" style="background: white; color: var(--jungle-teal);">Suscribirse</button>
                        </div>
                        <p class="newsletter-disclaimer" style="color: rgba(255,255,255,0.7); font-size: 0.8rem; margin-top: 1rem;">
                            Al suscribirte, aceptas recibir emails de Local From Bocas. Puedes cancelar en cualquier momento.
                        </p>
                    </form>
                </div>
                
                <div class="social-media">
                    <h3 style="color: white; margin-bottom: 1rem;">Síguenos</h3>
                    <div class="social-links">
                        <a href="#" class="social-link" title="Facebook">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link" title="Instagram">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link" title="YouTube">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link" title="TikTok">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Local From Bocas</h3>
                    <p>Conectando viajeros con la auténtica cultura de Bocas del Toro, Panamá.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Servicios</h3>
                    <a href="servicios.html#tours">Tours Históricos</a>
                    <a href="servicios.html#merchandise">Mercancía Cultural</a>
                    <a href="servicios.html#assistance">Asistencia Personalizada</a>
                </div>
                
                <div class="footer-section">
                    <h3>Explorar</h3>
                    <a href="vlogs.html">Vlogs</a>
                    <a href="panama.html">Panamá</a>
                    <a href="nosotros.html">Nosotros</a>
                </div>
                
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <a href="contacto.html">Contáctanos</a>
                    <a href="mailto:info@localfrombocas.com">info@localfrombocas.com</a>
                    <a href="tel:+507-1234-5678">+507 1234-5678</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Local From Bocas. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // Datos de las provincias y comarcas
        const regionData = {
            'bocas-del-toro': {
                name: 'Bocas del Toro',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/0F5B55/FFFFFF?text=Bocas+del+Toro+Caribbean',
                pill: '🏝️ Caribe',
                description: 'Conocida como "Las Galápagos del Siglo XXI", esta provincia caribeña alberga una biodiversidad excepcional y una rica cultura afrocaribeña.',
                highlights: ['🌊 Archipiélago único', '🌿 Biodiversidad excepcional', '🎭 Cultura afrocaribeña']
            },
            'chiriqui': {
                name: 'Chiriquí',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/8DBB66/FFFFFF?text=Chiriqui',
                pill: '🏔️ Tierras Altas',
                description: 'La "Suiza de Panamá" con sus tierras altas, volcanes y clima templado. Cuna de la agricultura de altura y el ecoturismo.',
                highlights: ['🌋 Volcán Barú', '☕ Café de altura', '🌲 Bosques nubosos']
            },
            'cocle': {
                name: 'Coclé',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/FF7466/FFFFFF?text=Cocle',
                pill: '🏖️ Pacífico Central',
                description: 'Corazón geográfico de Panamá con playas del Pacífico, montañas y una rica tradición cultural que incluye el famoso Carnaval de Penonomé.',
                highlights: ['🎭 Carnaval tradicional', '🏖️ Playas del Pacífico', '🏔️ Cordillera Central']
            },
            'colon': {
                name: 'Colón',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/2C8AC6/FFFFFF?text=Colon',
                pill: '🚢 Zona Libre',
                description: 'Puerta de entrada del Caribe con la Zona Libre de Colón, fortificaciones coloniales y playas caribeñas vírgenes.',
                highlights: ['🏰 Fortificaciones coloniales', '🛒 Zona Libre', '🏝️ Islas caribeñas']
            },
            'darien': {
                name: 'Darién',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/5B4B3F/FFFFFF?text=Darien',
                pill: '🌿 Selva Virgen',
                description: 'La provincia más salvaje de Panamá con selvas vírgenes, comunidades indígenas y el famoso Tapón del Darién.',
                highlights: ['🌳 Selva virgen', '👥 Comunidades indígenas', '🦜 Biodiversidad única']
            },
            'herrera': {
                name: 'Herrera',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/8DBB66/FFFFFF?text=Herrera',
                pill: '🌾 Azuero',
                description: 'Corazón de la Península de Azuero con tradiciones folclóricas, artesanías y una rica herencia cultural española.',
                highlights: ['🎭 Folclor tradicional', '🏺 Artesanías', '🌾 Tradición ganadera']
            },
            'los-santos': {
                name: 'Los Santos',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/FF7466/FFFFFF?text=Los+Santos',
                pill: '🎭 Folclor',
                description: 'Cuna del folclor panameño con el famoso Festival de la Mejorana, tradiciones centenarias y hermosas playas del Pacífico.',
                highlights: ['🎪 Festival de la Mejorana', '🏖️ Playas del Pacífico', '🎭 Folclor auténtico']
            },
            'panama': {
                name: 'Panamá',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/0F5B55/FFFFFF?text=Panama',
                pill: '🏙️ Capital',
                description: 'La capital del país con el Casco Antiguo, rascacielos modernos, el Canal de Panamá y una vibrante vida urbana.',
                highlights: ['🏗️ Canal de Panamá', '🏛️ Casco Antiguo', '🌆 Vida urbana']
            },
            'panama-oeste': {
                name: 'Panamá Oeste',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/2C8AC6/FFFFFF?text=Panama+Oeste',
                pill: '🌊 Pacífico',
                description: 'La provincia más joven con hermosas playas del Pacífico, desarrollo urbano y acceso directo a la capital.',
                highlights: ['🏖️ Playas del Pacífico', '🏘️ Desarrollo urbano', '🌊 Acceso al mar']
            },
            'veraguas': {
                name: 'Veraguas',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/5B4B3F/FFFFFF?text=Veraguas',
                pill: '🌊 Dos Mares',
                description: 'La única provincia con costas en ambos océanos, rica en historia colonial y hermosos paisajes naturales.',
                highlights: ['🌊 Caribe y Pacífico', '🏰 Historia colonial', '🏔️ Paisajes naturales']
            },
            'guna-yala': {
                name: 'Guna Yala',
                type: 'comarca',
                image: 'https://via.placeholder.com/350x200/0F5B55/FFFFFF?text=Guna+Yala',
                pill: '🏝️ Caribe',
                description: 'Comarca autónoma en el Caribe con 365 islas, cultura guna preservada y hermosas playas vírgenes.',
                highlights: ['🏝️ 365 islas', '🎨 Molas tradicionales', '🌊 Aguas cristalinas']
            },
            'embera-wounaan': {
                name: 'Emberá-Wounaan',
                type: 'comarca',
                image: 'https://via.placeholder.com/350x200/8DBB66/FFFFFF?text=Embera-Wounaan',
                pill: '🌿 Selva',
                description: 'Comarca en la selva del Darién que preserva las tradiciones de los pueblos emberá y wounaan.',
                highlights: ['🌳 Selva tropical', '🎨 Artesanías en madera', '🏹 Tradiciones ancestrales']
            },
            'ngabe-bugle': {
                name: 'Ngäbe-Buglé',
                type: 'comarca',
                image: 'https://via.placeholder.com/350x200/FF7466/FFFFFF?text=Ngabe-Bugle',
                pill: '🏔️ Tierras Altas',
                description: 'La comarca más grande de Panamá en las tierras altas, hogar de los pueblos ngäbe y buglé.',
                highlights: ['🏔️ Tierras altas', '☕ Cultivo de café', '🎭 Tradiciones vivas']
            }
        };

        // Función para mostrar la tarjeta dinámica
        function showDynamicCard(regionKey, event) {
            const region = regionData[regionKey];
            if (!region) return;

            const card = document.getElementById('dynamicCard');
            const image = document.getElementById('dynamicCardImage');
            const pill = document.getElementById('dynamicCardPill');
            const title = document.getElementById('dynamicCardTitle');
            const description = document.getElementById('dynamicCardDescription');
            const highlights = document.getElementById('dynamicCardHighlights');

            // Actualizar contenido
            image.src = region.image;
            image.alt = region.name;
            pill.textContent = region.pill;
            title.textContent = region.name;
            description.textContent = region.description;
            
            highlights.innerHTML = '';
            region.highlights.forEach(highlight => {
                const span = document.createElement('span');
                span.className = 'pill-light';
                span.textContent = highlight;
                highlights.appendChild(span);
            });

            // Resetear posición y mostrar primero
            card.style.display = 'block';
            card.style.left = '0px';
            card.style.top = '0px';

            // Posicionar la tarjeta al lado opuesto de la ubicación
            if (event) {
                // Usar requestAnimationFrame para asegurar que el DOM se actualice
                requestAnimationFrame(() => {
                    const rect = document.getElementById('panamaMap').getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    
                    // Dimensiones de la tarjeta
                    const cardWidth = 350;
                    const cardHeight = 300;
                    
                    // Provincias que siempre deben mostrar el popup a la derecha
                    const rightSideProvinces = [
                        'bocas-del-toro', 'chiriqui', 'ngabe-bugle'
                    ];
                    
                    // Provincias que siempre deben mostrar el popup a la izquierda
                    const leftSideProvinces = [
                        'herrera', 'los-santos', 'veraguas', 'cocle'
                    ];
                    
                    // Provincias que deben mostrar el popup en la parte inferior
                    const bottomSideProvinces = [
                        'colon'
                    ];
                    
                    // Posicionar en el lado opuesto
                    let finalX, finalY;
                    
                    // Si es una provincia específica que debe ir a la derecha
                    if (rightSideProvinces.includes(regionKey)) {
                        // Mostrar el popup más hacia la derecha del mapa
                        finalX = Math.min(rect.width - cardWidth - 20, rect.width * 0.6);
                        finalY = Math.max(10, Math.min(y - cardHeight / 2, rect.height - cardHeight - 10));
                    } else if (leftSideProvinces.includes(regionKey)) {
                        // Mostrar el popup al lado izquierdo del mapa
                        finalX = Math.max(20, rect.width * 0.1);
                        finalY = Math.max(10, Math.min(y - cardHeight / 2, rect.height - cardHeight - 10));
                    } else if (bottomSideProvinces.includes(regionKey)) {
                        // Mostrar el popup en la parte inferior del mapa
                        finalX = Math.max(20, Math.min(x - cardWidth / 2, rect.width - cardWidth - 20));
                        finalY = Math.max(rect.height - cardHeight - 20, rect.height * 0.6);
                    } else {
                        // Para otras provincias, usar la lógica normal
                        const mapCenterX = rect.width / 2;
                        const isLeftSide = x < mapCenterX;
                        
                        if (isLeftSide) {
                            // Si está en el lado izquierdo, mostrar el popup a la derecha
                            finalX = Math.min(x + 30, rect.width - cardWidth - 20);
                        } else {
                            // Si está en el lado derecho, mostrar el popup a la izquierda
                            finalX = Math.max(x - cardWidth - 30, 20);
                        }
                        
                        // Centrar verticalmente, pero ajustar si se sale del contenedor
                        finalY = Math.max(10, Math.min(y - cardHeight / 2, rect.height - cardHeight - 10));
                    }
                    
                    card.style.left = `${finalX}px`;
                    card.style.top = `${finalY}px`;
                });
            }
        }

        // Función para ocultar la tarjeta dinámica
        function hideDynamicCard() {
            const card = document.getElementById('dynamicCard');
            card.style.display = 'none';
        }

        // Función para cargar y renderizar el mapa GeoJSON
        async function loadPanamaMap() {
            try {
                const response = await fetch('./data/geoBoundaries-PAN-ADM1.geojson');
                const geo = await response.json();
                renderMap(geo);
            } catch (error) {
                console.error('Error cargando GeoJSON:', error);
            }
        }

        // Función para renderizar el mapa
        function renderMap(geo) {
            const container = document.getElementById('panamaMap');
            container.innerHTML = '';

            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('viewBox', '0 0 1000 400');
            svg.style.width = '100%';
            svg.style.height = '100%';

            // Calcular bounds
            let minLon = Infinity, minLat = Infinity, maxLon = -Infinity, maxLat = -Infinity;

            function scanCoords(coords) {
                for (const poly of coords) {
                    const rings = Array.isArray(poly[0][0]) ? poly : [poly];
                    for (const ring of rings) {
                        for (const pt of ring) {
                            const [lon, lat] = pt;
                            if (lon < minLon) minLon = lon;
                            if (lon > maxLon) maxLon = lon;
                            if (lat < minLat) minLat = lat;
                            if (lat > maxLat) maxLat = lat;
                        }
                    }
                }
            }

            for (const f of geo.features) {
                const g = f.geometry;
                if (!g) continue;
                if (g.type === 'Polygon') scanCoords([g.coordinates]);
                if (g.type === 'MultiPolygon') scanCoords(g.coordinates);
            }

            const viewW = 1000, viewH = 400;
            function project([lon, lat]) {
                const x = (lon - minLon) / (maxLon - minLon) * viewW;
                const y = (maxLat - lat) / (maxLat - minLat) * viewH;
                return [x, y];
            }

            function pathFromPolygon(coords) {
                let d = '';
                for (const ring of coords) {
                    const [startX, startY] = project(ring[0]);
                    d += `M ${startX} ${startY}`;
                    for (let i = 1; i < ring.length; i++) {
                        const [x, y] = project(ring[i]);
                        d += ` L ${x} ${y}`;
                    }
                    d += ' Z ';
                }
                return d.trim();
            }

            geo.features.forEach((f, idx) => {
                const g = f.geometry;
                let d = '';
                if (g.type === 'Polygon') {
                    d = pathFromPolygon(g.coordinates);
                } else if (g.type === 'MultiPolygon') {
                    d = g.coordinates.map(poly => pathFromPolygon(poly)).join(' ');
                } else {
                    return;
                }

                const name = f.properties.shapeName || `Región ${idx + 1}`;
                const normalizedName = normalizeName(name);
                const isComarca = name.includes('Comarca');

                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', d);
                path.setAttribute('class', isComarca ? 'comarca-path' : 'province-path');
                path.setAttribute('data-region', normalizedName);

                // Eventos de hover
                path.addEventListener('mouseenter', (event) => {
                    showDynamicCard(normalizedName, event);
                });

                path.addEventListener('mouseleave', () => {
                    hideDynamicCard();
                });

                // Evento de click
                path.addEventListener('click', () => {
                    window.location.href = `panama/${normalizedName}.html`;
                });

                svg.appendChild(path);
            });

            container.appendChild(svg);
        }

        // Función para normalizar nombres
        function normalizeName(name) {
            const nameMap = {
                'Provincia de Bocas del Toro': 'bocas-del-toro',
                'Colón Province': 'colon',
                'Provincia de Darién': 'darien',
                'Comarca Emberá-Wounaan': 'embera-wounaan',
                'Comarca Guna Yala': 'guna-yala',
                'Provincia de Herrera': 'herrera',
                'Provincia de Los Santos': 'los-santos',
                'Comarca Ngäbe-Buglé': 'ngabe-bugle',
                'Provincia de Panamá': 'panama',
                'Provincia de Panamá Oeste': 'panama-oeste',
                'Provincia de Veraguas': 'veraguas',
                'Provincia de Chiriquí': 'chiriqui',
                'Provincia de Coclé': 'cocle'
            };
            
            return nameMap[name] || name.toLowerCase().replace(/\s+/g, '-');
        }

        // Cargar el mapa cuando se carga la página
        document.addEventListener('DOMContentLoaded', loadPanamaMap);
    </script>
    
    <script>
        // Cultural Diversity Pie Chart
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('culturalDiversityChart');
            if (ctx) {
                const culturalDiversityChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Mestizo Majority', 'Afro-descendants', 'Indigenous Peoples'],
                        datasets: [{
                            data: [51.1, 31.7, 17.2],
                            backgroundColor: [
                                '#8DBB66', // Palm Leaf - Mestiza
                                '#2C8AC6', // Ocean Blue - Afrodescendientes
                                '#0F5B55'  // Jungle Teal - Indígenas
                            ],
                            borderColor: [
                                '#7AA855',
                                '#1E7BB8',
                                '#0D4A47'
                            ],
                            borderWidth: 2,
                            hoverOffset: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: false // We're using custom legend
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.parsed;
                                        const population = getPopulationForGroup(context.dataIndex);
                                        return `${label}: ${value}% (${population} people)`;
                                    }
                                },
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: 'white',
                                bodyColor: 'white',
                                borderColor: '#0F5B55',
                                borderWidth: 1
                            }
                        },
                        cutout: '60%',
                        animation: {
                            animateRotate: true,
                            animateScale: true,
                            duration: 2000,
                            easing: 'easeOutQuart'
                        }
                    }
                });
                
                // Function to get population for tooltip
                function getPopulationForGroup(index) {
                    const populations = ['2,079,809', '1,286,857', '698,114'];
                    return populations[index];
                }
                
                // Add click interaction
                ctx.addEventListener('click', function(event) {
                    const points = culturalDiversityChart.getElementsAtEventForMode(event, 'nearest', { intersect: true }, true);
                    if (points.length) {
                        const firstPoint = points[0];
                        const label = culturalDiversityChart.data.labels[firstPoint.index];
                        const value = culturalDiversityChart.data.datasets[0].data[firstPoint.index];
                        const population = getPopulationForGroup(firstPoint.index);
                        
                        // Show detailed info (you could add a modal or alert here)
                        // Chart data processed
                    }
                });
            }
        });
    </script>
    
    <script>
        // Comprehensive Canal Timeline functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Milestone data structure
            const milestones = [
                { id: 1, title: "The First Peoples of the Isthmus", description: "Los pueblos indígenas establecieron las primeras rutas de comercio a través del istmo, creando una red de intercambio que conectaba las culturas del Pacífico y el Caribe mucho antes de la llegada de los europeos.", era: "Pre-Columbian", year: "c. 10,000 BCE", controlBarPosition: 0.00, lock: false, icon: "🏺" },
                { id: 2, title: "Conquest and Colonization (1501-1519)", description: "Rodrigo de Bastidas fue el primer europeo en explorar las costas de Panamá, iniciando la era colonial española en el istmo que duraría tres siglos.", era: "Spanish Colony", year: "1501-1519", controlBarPosition: 0.10, lock: false, icon: "⚔️" },
                { id: 3, title: "The Silver Route and the Scourge of Piracy", description: "Panamá se convirtió en el eje de la Ruta de la Plata, transportando tesoros del Perú hacia España, pero también atrajo a piratas como Francis Drake y Henry Morgan.", era: "Spanish Colony", year: "16th-18th Centuries", controlBarPosition: 0.18, lock: false, icon: "🏴‍☠️" },
                { id: 4, title: "Independence from Spain and Union with Gran Colombia", description: "Panamá se independiza de España y se une a la Gran Colombia, marcando el fin de tres siglos de dominio colonial español.", era: "Colombian Era", year: "1821-1830", controlBarPosition: 0.25, lock: false, icon: "🏛️" },
                { id: 5, title: "A Neglected Province and the Rise of U.S. Influence", description: "Panamá se convierte en una provincia descuidada de Colombia mientras Estados Unidos aumenta su influencia en la región, especialmente en asuntos del canal.", era: "Colombian Era", year: "1830s-1880s", controlBarPosition: 0.32, lock: false, icon: "🇺🇸" },
                { id: 6, title: "The French Failure and the Geopolitics of Secession", description: "El intento francés de construir el canal bajo Ferdinand de Lesseps fracasa, pero establece las bases para la futura construcción estadounidense.", era: "Colombian Era", year: "1880-1903", controlBarPosition: 0.40, lock: false, icon: "🔧" },
                { id: 7, title: "The Hay-Bunau-Varilla Treaty: A Contentious Foundation", description: "Con el apoyo de Estados Unidos, Panamá se independiza de Colombia y se firma el controvertido tratado que otorga derechos del canal a Estados Unidos.", era: "U.S. Zone", year: "1903", controlBarPosition: 0.45, lock: false, icon: "📜" },
                { id: 8, title: "Building the 'Big Ditch': An Engineering Marvel at Human Cost", description: "La construcción del Canal de Panamá comienza, una obra de ingeniería monumental que revolucionó el comercio mundial pero a un costo humano enorme.", era: "U.S. Zone", year: "1904-1914", controlBarPosition: 0.55, lock: true, icon: "🏗️" },
                { id: 9, title: "The Canal Zone: An American Enclave and a Source of Panamanian Nationalism", description: "La Zona del Canal se convierte en un enclave estadounidense en territorio panameño, generando tensiones nacionalistas que durarían décadas.", era: "U.S. Zone", year: "1914-1960s", controlBarPosition: 0.63, lock: false, icon: "🚧" },
                { id: 10, title: "From Flag Riots to Negotiations: The Long Road to Sovereignty", description: "Los disturbios de la bandera de 1964 marcan un punto de inflexión en las relaciones entre Panamá y Estados Unidos, iniciando negociaciones serias.", era: "U.S. Zone", year: "1960s-1970s", controlBarPosition: 0.70, lock: false, icon: "🏴" },
                { id: 11, title: "The Torrijos Era: Populism, Reform, and the Canal Treaties", description: "Omar Torrijos lidera un gobierno populista que negocia los históricos Tratados Torrijos-Carter, estableciendo la devolución gradual del canal.", era: "Turmoil & Transition", year: "1968-1981", controlBarPosition: 0.75, lock: false, icon: "🤝" },
                { id: 12, title: "The Noriega Dictatorship: From CIA Asset to International Pariah", description: "Manuel Noriega, ex-agente de la CIA, se convierte en dictador, llevando a Panamá a un período de turbulencia política y aislamiento internacional.", era: "Turmoil & Transition", year: "1983-1989", controlBarPosition: 0.78, lock: false, icon: "👤" },
                { id: 13, title: "Operation Just Cause: The 1989 U.S. Invasion and its Aftermath", description: "Estados Unidos invade Panamá para derrocar a Noriega, restaurando la democracia pero dejando cicatrices profundas en la sociedad panameña.", era: "Turmoil & Transition", year: "1989", controlBarPosition: 0.82, lock: false, icon: "⚔️" },
                { id: 14, title: "The Final Handover: Panama Assumes Control of its Greatest Asset", description: "Panamá recupera la soberanía total sobre el Canal, marcando un hito histórico en la consolidación de la nación y su identidad.", era: "Turmoil & Transition", year: "1999", controlBarPosition: 0.85, lock: true, icon: "🎉" },
                { id: 15, title: "Democratic Consolidation and Political Landscape", description: "Panamá consolida su democracia y desarrolla un panorama político estable, superando las turbulencias del pasado.", era: "21st Century", year: "2000s", controlBarPosition: 0.90, lock: false, icon: "🗳️" },
                { id: 16, title: "An Economic Hub: Canal Expansion, Growth, and Persistent Inequality", description: "La expansión del canal en 2016 consolida a Panamá como centro económico regional, aunque persisten desafíos de desigualdad social.", era: "21st Century", year: "2010s", controlBarPosition: 0.93, lock: false, icon: "📈" },
                { id: 17, title: "Contemporary Challenges: Migration, Indigenous Rights, and Social Cohesion", description: "Panamá enfrenta desafíos contemporáneos como la migración, los derechos indígenas y la cohesión social en un mundo globalizado.", era: "21st Century", year: "2020s", controlBarPosition: 0.96, lock: false, icon: "🌍" },
                { id: 18, title: "Navigating a New Geopolitical Era: Relations with the U.S. and China", description: "Panamá navega las complejas relaciones geopolíticas entre Estados Unidos y China, manteniendo su posición estratégica en el comercio mundial.", era: "21st Century", year: "2020s-2025", controlBarPosition: 1.00, lock: false, icon: "🌐" }
            ];
            
            // DOM elements
            const canalShip = document.getElementById('canalShip');
            const timelineMilestones = document.getElementById('timelineMilestones');
            const deckCard = document.getElementById('deckCard');
            const cardEra = document.getElementById('cardEra');
            const cardYear = document.getElementById('cardYear');
            const cardTitle = document.getElementById('cardTitle');
            const cardDescription = document.getElementById('cardDescription');
            const playBtn = document.getElementById('playTimeline');
            const pauseBtn = document.getElementById('pauseTimeline');
            const resetBtn = document.getElementById('resetTimeline');
            const locks = document.querySelectorAll('.lock');
            
            // State variables
            let currentMilestoneIndex = 0;
            let isPlaying = false;
            let animationInterval;
            
            // Initialize timeline
            function initializeTimeline() {
                // Timeline initialization
                generateMilestoneDots();
                updateDeckCard(milestones[0]);
                moveShipToPosition(0);
                // Timeline ready
            }
            
            // Generate milestone dots
            function generateMilestoneDots() {
                // Generating milestone markers
                timelineMilestones.innerHTML = '';
                
                milestones.forEach((milestone, index) => {
                    const dot = document.createElement('div');
                    dot.className = `milestone-dot era-${getEraClass(milestone.era)} ${index === 0 ? 'active' : ''}`;
                    dot.dataset.index = index;
                    dot.innerHTML = `
                        <div class="dot-glow"></div>
                        <div class="milestone-tooltip">
                            <div class="tooltip-year">${milestone.year}</div>
                            <div class="tooltip-title">${milestone.title}</div>
                        </div>
                    `;
                    
                    // Add click event
                    dot.addEventListener('click', () => goToMilestone(index));
                    
                    // Add hover effects
                    dot.addEventListener('mouseenter', function() {
                        if (!this.classList.contains('active')) {
                            this.style.transform = 'scale(1.2)';
                        }
                    });
                    
                    dot.addEventListener('mouseleave', function() {
                        if (!this.classList.contains('active')) {
                            this.style.transform = 'scale(1)';
                        }
                    });
                    
                    timelineMilestones.appendChild(dot);
                });
                // Milestone markers generated
            }
            
            // Get era class for styling
            function getEraClass(era) {
                const eraMap = {
                    'Pre-Columbian': 1,
                    'Spanish Colony': 1,
                    'Colombian Era': 2,
                    'U.S. Zone': 3,
                    'Turmoil & Transition': 4,
                    '21st Century': 5
                };
                return eraMap[era] || 1;
            }
            
            // Move ship to position
            function moveShipToPosition(progress) {
                // Calculate ship position to align with milestone dots
                // Start at the first milestone position and move in a straight line
                const startPosition = 2; // Start at 2% (first milestone area)
                const endPosition = 98; // End at 98% (last milestone area)
                const shipPosition = startPosition + (progress * (endPosition - startPosition));
                canalShip.style.left = `${shipPosition}%`;
                
                // Ship stays strictly on water line - no vertical movement
                // Only add classes for visual effects, not positioning
                if (progress >= 0.45 && progress <= 0.55) {
                    // Miraflores Locks area
                    canalShip.classList.add('in-locks');
                    canalShip.classList.remove('in-lake');
                } else if (progress >= 0.55 && progress <= 0.75) {
                    // Pedro Miguel and Gatún Lake
                    canalShip.classList.add('in-lake');
                    canalShip.classList.remove('in-locks');
                } else if (progress >= 0.75 && progress <= 0.85) {
                    // Gatún Locks area
                    canalShip.classList.add('in-locks');
                    canalShip.classList.remove('in-lake');
                } else {
                    canalShip.classList.remove('in-locks', 'in-lake');
                }
            }
            
            // Animate locks
            function animateLocks(progress) {
                // Reset all locks
                locks.forEach(lock => {
                    lock.classList.remove('raising', 'lowering', 'gates-closing', 'gates-opening');
                    const water = lock.querySelector('.lock-water');
                    if (water) water.style.height = '30px';
                });
                
                // Animate based on progress
                if (progress >= 0.45 && progress <= 0.55) {
                    // Miraflores Locks
                    const pacificLocks = document.querySelectorAll('.locks-pacific .lock');
                    const lockProgress = (progress - 0.45) / 0.1;
                    
                    pacificLocks.forEach((lock, index) => {
                        // Gates close first
                        if (lockProgress < 0.3) {
                            lock.classList.add('gates-closing');
                        } else if (lockProgress < 0.7) {
                            // Water rises
                            lock.classList.add('raising');
                            const water = lock.querySelector('.lock-water');
                            const waterLevel = 30 + ((lockProgress - 0.3) / 0.4) * 30;
                            if (water) water.style.height = `${waterLevel}px`;
                        } else {
                            // Gates open
                            lock.classList.remove('gates-closing');
                            lock.classList.add('gates-opening');
                        }
                    });
                } else if (progress >= 0.75 && progress <= 0.85) {
                    // Gatún Locks
                    const atlanticLocks = document.querySelectorAll('.locks-atlantic .lock');
                    const lockProgress = (progress - 0.75) / 0.1;
                    
                    atlanticLocks.forEach((lock, index) => {
                        // Gates close first
                        if (lockProgress < 0.3) {
                            lock.classList.add('gates-closing');
                        } else if (lockProgress < 0.7) {
                            // Water rises
                            lock.classList.add('raising');
                            const water = lock.querySelector('.lock-water');
                            const waterLevel = 30 + ((lockProgress - 0.3) / 0.4) * 30;
                            if (water) water.style.height = `${waterLevel}px`;
                        } else {
                            // Gates open
                            lock.classList.remove('gates-closing');
                            lock.classList.add('gates-opening');
                        }
                    });
                }
            }
            
            // Update deck card
            function updateDeckCard(milestone) {
                cardEra.textContent = milestone.era;
                cardEra.className = `card-era era-${getEraClass(milestone.era)}`;
                cardYear.textContent = milestone.year;
                cardTitle.textContent = milestone.title;
                cardDescription.textContent = milestone.description;
                
                // Add fade effect
                deckCard.style.opacity = '0.7';
                setTimeout(() => {
                    deckCard.style.opacity = '1';
                }, 150);
            }
            
            // Go to specific milestone
            function goToMilestone(index) {
                currentMilestoneIndex = index;
                const milestone = milestones[index];
                
                // Update active dot
                document.querySelectorAll('.milestone-dot').forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
                
                // Move ship and animate
                moveShipToPosition(milestone.controlBarPosition);
                animateLocks(milestone.controlBarPosition);
                updateDeckCard(milestone);
            }
            
            // Auto-play functionality
            function startAutoPlay() {
                if (isPlaying) return;
                
                isPlaying = true;
                playBtn.style.display = 'none';
                pauseBtn.style.display = 'flex';
                
                animationInterval = setInterval(() => {
                    currentMilestoneIndex = (currentMilestoneIndex + 1) % milestones.length;
                    goToMilestone(currentMilestoneIndex);
                }, 3000);
            }
            
            function stopAutoPlay() {
                isPlaying = false;
                playBtn.style.display = 'flex';
                pauseBtn.style.display = 'none';
                clearInterval(animationInterval);
            }
            
            function resetTimeline() {
                stopAutoPlay();
                goToMilestone(0);
            }
            
            // Event listeners
            playBtn.addEventListener('click', startAutoPlay);
            pauseBtn.addEventListener('click', stopAutoPlay);
            resetBtn.addEventListener('click', resetTimeline);
            
            // Initialize
            initializeTimeline();
        });
        
        // Photo gallery lightbox functionality
        document.addEventListener('DOMContentLoaded', function() {
            const photoItems = document.querySelectorAll('.photo-item');
            const lightbox = document.getElementById('photoLightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            const lightboxCaption = document.getElementById('lightboxCaption');
            const lightboxClose = document.querySelector('.lightbox-close');
            
            photoItems.forEach(item => {
                item.addEventListener('click', function() {
                    const img = this.querySelector('img');
                    const caption = img.getAttribute('data-caption');
                    
                    lightboxImage.src = img.src;
                    lightboxImage.alt = img.alt;
                    lightboxCaption.textContent = caption;
                    lightbox.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                });
            });
            
            lightboxClose.addEventListener('click', function() {
                lightbox.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    lightbox.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
        });
        
        // Province mini cards functionality
        document.addEventListener('DOMContentLoaded', function() {
            const provinceCards = document.querySelectorAll('.province-mini-card');
            
            provinceCards.forEach(card => {
                card.addEventListener('click', function() {
                    const province = this.getAttribute('data-province');
                    window.location.href = `panama/${province}.html`;
                });
            });
        });
        
        // Newsletter form functionality
        document.addEventListener('DOMContentLoaded', function() {
            const newsletterForm = document.getElementById('newsletterForm');
            
            newsletterForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const email = this.querySelector('input[type="email"]').value;
                
                // Simple validation
                if (email && email.includes('@')) {
                    alert('¡Gracias por suscribirte! Te mantendremos informado sobre las últimas noticias de Panamá.');
                    this.reset();
                } else {
                    alert('Por favor, ingresa un correo electrónico válido.');
                }
            });
        });
        
        // Smooth scrolling for internal links
        document.addEventListener('DOMContentLoaded', function() {
            const links = document.querySelectorAll('a[href^="#"]');
            
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
    
    <script>
        // Panama Canal Interactive Cross-Section
        document.addEventListener('DOMContentLoaded', function() {
            // Lock data
            const lockData = {
                'miraflores-lock': {
                    name: 'Esclusas de Miraflores',
                    year: '1914',
                    fact: 'Primeras esclusas del Pacífico',
                    description: 'Las esclusas de Miraflores son las primeras que encuentran los barcos que vienen del Pacífico, elevándolos 16 metros hasta el nivel del Lago Miraflores. Construidas en 1914, son una maravilla de la ingeniería hidráulica.'
                },
                'pedro-miguel-lock': {
                    name: 'Esclusa de Pedro Miguel',
                    year: '1914',
                    fact: 'Esclusa intermedia única',
                    description: 'La esclusa de Pedro Miguel es la única esclusa de una sola cámara en el canal original. Eleva los barcos 9.5 metros desde el Lago Miraflores hasta el nivel del Lago Gatún, completando el ascenso total.'
                },
                'gatun-lock': {
                    name: 'Esclusas de Gatún',
                    year: '1914',
                    fact: 'Las más grandes del mundo',
                    description: 'Las esclusas de Gatún son las más grandes del mundo en su época. Descienden los barcos 26 metros desde el Lago Gatún hasta el nivel del Océano Atlántico, completando el cruce del canal.'
                }
            };
            
            // No click listeners (no modals). Only tooltips on hover.
            
            // Add hover tooltips
            Object.keys(lockData).forEach(lockId => {
                const lockElement = document.getElementById(lockId);
                if (lockElement) {
                    const data = lockData[lockId];
                    lockElement.addEventListener('mouseenter', (e) => {
                        showTooltip(e, data.name, data.year, data.fact);
                    });
                    lockElement.addEventListener('mouseleave', hideTooltip);
                }
            });
            
            // Initialize animated counters
            initializeCounters();
            
            // Add route hover effects
            initializeTradeRoutes();
        });
        
        // Simplified: no modal behavior
        
        // Tooltip functionality
        let tooltip = null;
        
        function showTooltip(event, name, year, fact) {
            hideTooltip();
            
            tooltip = document.createElement('div');
            tooltip.className = 'lock-tooltip';
            tooltip.innerHTML = `
                <div class="tooltip-name">${name}</div>
                <div class="tooltip-year">${year}</div>
                <div class="tooltip-fact">${fact}</div>
            `;
            
            document.body.appendChild(tooltip);
            
            const rect = event.target.getBoundingClientRect();
            tooltip.style.left = rect.left + rect.width / 2 - tooltip.offsetWidth / 2 + 'px';
            tooltip.style.top = rect.top - tooltip.offsetHeight - 10 + 'px';
        }
        
        function hideTooltip() {
            if (tooltip) {
                tooltip.remove();
                tooltip = null;
            }
        }
        
        // Animated counters
        function initializeCounters() {
            const shipsCounter = document.getElementById('shipsCounter');
            const tonnageCounter = document.getElementById('tonnageCounter');
            
            // Animate ships counter
            animateCounter(shipsCounter, 0, 14000, 2000);
            
            // Animate tonnage counter
            animateCounter(tonnageCounter, 0, 500, 2500);
        }
        
        function animateCounter(element, start, end, duration) {
            const startTime = performance.now();
            
            function updateCounter(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                const current = Math.floor(start + (end - start) * progress);
                element.textContent = current.toLocaleString();
                
                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }
            
            requestAnimationFrame(updateCounter);
        }
        
        // Trade routes
        function initializeTradeRoutes() {
            const routes = document.querySelectorAll('.route');
            
            routes.forEach(route => {
                route.addEventListener('mouseenter', (e) => {
                    e.target.style.transform = 'translateX(10px) scale(1.02)';
                });
                
                route.addEventListener('mouseleave', (e) => {
                    e.target.style.transform = 'translateX(0) scale(1)';
                });
            });
        }

        // National Symbols Slider and Modal
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.querySelector('.symbols-slider');
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            const dots = document.querySelectorAll('.dot');
            const symbolCards = document.querySelectorAll('.symbol-card');
            const modal = document.getElementById('symbolModal');
            const modalClose = document.querySelector('.modal-close');
            
            let currentSlide = 0;
            const totalSlides = symbolCards.length;
            const cardsPerView = window.innerWidth < 768 ? 2 : 3;
            
            // Symbol data for modal
            const symbolData = {
                flag: {
                    icon: '🏴',
                    title: 'Panama Flag',
                    image: 'https://images.unsplash.com/photo-1521753048031-8a2b5c5b5b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    description: 'The Panamanian flag features two horizontal rectangles - red and blue - representing the two political parties that existed when the flag was created. The white rectangle in the center symbolizes peace between them.',
                    facts: [
                        'Adopted on November 3, 1903',
                        'Designed by Manuel E. Amador',
                        'Red represents the Liberal Party',
                        'Blue represents the Conservative Party',
                        'White represents peace and purity'
                    ]
                },
                anthem: {
                    icon: '🎵',
                    title: 'National Anthem',
                    image: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    description: 'The Panamanian National Anthem, "Himno Istmeño", was composed by Santos Jorge and written by Jerónimo de la Ossa. It was officially adopted in 1906.',
                    facts: [
                        'Composed by Santos Jorge in 1903',
                        'Lyrics by Jerónimo de la Ossa',
                        'Officially adopted in 1906',
                        'Originally called "Himno Istmeño"',
                        'Celebrates Panama\'s independence and natural beauty'
                    ]
                },
                coat: {
                    icon: '🛡️',
                    title: 'Coat of Arms',
                    image: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    description: 'The Panamanian coat of arms features a shield divided into four quarters, each representing different aspects of Panama\'s history and geography.',
                    facts: [
                        'Designed by Nicanor Villalaz',
                        'Adopted in 1904',
                        'Top left: Tools of work and progress',
                        'Top right: Weapons of war and defense',
                        'Bottom left: Cornucopia of abundance',
                        'Bottom right: Wheel of progress'
                    ]
                },
                eagle: {
                    icon: '🦅',
                    title: 'Harpy Eagle',
                    image: 'https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    description: 'The Harpy Eagle is Panama\'s national bird and one of the most powerful eagles in the world. It represents strength, freedom, and the country\'s rich biodiversity.',
                    facts: [
                        'Declared national bird in 2002',
                        'One of the largest eagles in the world',
                        'Wingspan up to 2 meters',
                        'Lives in tropical rainforests',
                        'Symbol of strength and freedom',
                        'Endangered species requiring protection'
                    ]
                },
                orchid: {
                    icon: '🌸',
                    title: 'Holy Spirit Orchid',
                    image: 'https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    description: 'The Holy Spirit Orchid (Peristeria elata) is Panama\'s national flower. Its unique shape resembles a dove, symbolizing peace and the Holy Spirit.',
                    facts: [
                        'Declared national flower in 1980',
                        'Scientific name: Peristeria elata',
                        'Also known as "Dove Orchid"',
                        'Native to Central and South America',
                        'Symbolizes peace and the Holy Spirit',
                        'Rare and protected species'
                    ]
                }
            };
            
            // Update slider position
            function updateSlider() {
                const cardWidth = symbolCards[0].offsetWidth + 16; // width + gap
                const translateX = -currentSlide * cardWidth;
                slider.style.transform = `translateX(${translateX}px)`;
                
                // Update dots
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentSlide);
                });
                
                // Update button states
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide >= totalSlides - cardsPerView;
            }
            
            // Next slide
            function nextSlide() {
                if (currentSlide < totalSlides - cardsPerView) {
                    currentSlide++;
                    updateSlider();
                }
            }
            
            // Previous slide
            function prevSlide() {
                if (currentSlide > 0) {
                    currentSlide--;
                    updateSlider();
                }
            }
            
            // Go to specific slide
            function goToSlide(slideIndex) {
                currentSlide = slideIndex;
                updateSlider();
            }
            
            // Open modal with symbol data
            function openModal(symbolType) {
                const data = symbolData[symbolType];
                if (!data) return;
                
                document.getElementById('modalIcon').textContent = data.icon;
                document.getElementById('modalTitle').textContent = data.title;
                document.getElementById('modalImage').src = data.image;
                document.getElementById('modalImage').alt = data.title;
                document.getElementById('modalDescription').textContent = data.description;
                
                const factsList = document.getElementById('modalFacts');
                factsList.innerHTML = '<h4>Quick Facts</h4><ul>' + 
                    data.facts.map(fact => `<li>${fact}</li>`).join('') + 
                    '</ul>';
                
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
            
            // Close modal
            function closeModal() {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
            
            // Event listeners
            nextBtn.addEventListener('click', nextSlide);
            prevBtn.addEventListener('click', prevSlide);
            
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => goToSlide(index));
            });
            
            symbolCards.forEach(card => {
                card.addEventListener('click', () => {
                    const symbolType = card.getAttribute('data-symbol');
                    openModal(symbolType);
                });
            });
            
            modalClose.addEventListener('click', closeModal);
            
            // Close modal when clicking outside
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.style.display === 'block') {
                    closeModal();
                }
            });
            
            // Handle window resize
            window.addEventListener('resize', () => {
                const newCardsPerView = window.innerWidth < 768 ? 2 : 3;
                if (newCardsPerView !== cardsPerView) {
                    currentSlide = Math.min(currentSlide, totalSlides - newCardsPerView);
                    updateSlider();
                }
            });
            
            // Touch/swipe support for mobile
            let startX = 0;
            let startY = 0;
            
            slider.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });
            
            slider.addEventListener('touchend', (e) => {
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const diffX = startX - endX;
                const diffY = startY - endY;
                
                // Only trigger if horizontal swipe is greater than vertical
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                    if (diffX > 0) {
                        nextSlide();
                    } else {
                        prevSlide();
                    }
                }
            });
            
            // Initialize slider
            updateSlider();
        });

        // Biodiversity Accordion Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const categoryTitles = document.querySelectorAll('.category-title');
            
            categoryTitles.forEach(title => {
                title.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    const speciesList = document.getElementById(category);
                    
                    // Toggle active class on title
                    this.classList.toggle('active');
                    
                    // Toggle species list visibility
                    if (speciesList.classList.contains('active')) {
                        speciesList.classList.remove('active');
                    } else {
                        speciesList.classList.add('active');
                    }
                });
            });
            
            // Species item hover tooltips (optional enhancement)
            const speciesItems = document.querySelectorAll('.species-item');
            
            speciesItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    // Add subtle hover effect
                    this.style.transform = 'translateX(4px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });
        });

        // Festivals Accordion Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const monthHeaders = document.querySelectorAll('.month-header');
            
            monthHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const month = this.getAttribute('data-month');
                    const content = document.getElementById(month);
                    
                    // Toggle active class on header
                    this.classList.toggle('active');
                    
                    // Toggle content visibility
                    if (content.classList.contains('active')) {
                        content.classList.remove('active');
                    } else {
                        content.classList.add('active');
                    }
                });
            });
            
            // Festival item hover effects
            const festivalItems = document.querySelectorAll('.festival-item, .holiday-item');
            
            festivalItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(4px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });
        });
        
        // ===== UX IMPROVEMENTS - COMPREHENSIVE JAVASCRIPT =====
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize all UX improvements
            new SectionNavigation();
            new MicroInteractions();
            new AccessibilityManager();
            new PerformanceOptimizer();
            
            // Initialize calendar
            initCalendar();
        });

        // ===== SECTION NAVIGATION SYSTEM =====
        class SectionNavigation {
            constructor() {
                this.nav = document.getElementById('sectionNav');
                this.links = document.querySelectorAll('.nav-link');
                this.sections = document.querySelectorAll('section[id]');
                this.progressBar = document.getElementById('progressBar');
                
                this.init();
            }
            
            init() {
                this.setupScrollListener();
                this.setupClickHandlers();
            }
            
            setupScrollListener() {
                let ticking = false;
                
                const updateActiveSection = () => {
                    const scrollTop = window.pageYOffset;
                    const windowHeight = window.innerHeight;
                    const documentHeight = document.documentElement.scrollHeight;
                    
                    // Update progress bar
                    const progress = (scrollTop / (documentHeight - windowHeight)) * 100;
                    this.progressBar.style.width = `${Math.min(progress, 100)}%`;
                    
                    // Update active nav link
                    this.sections.forEach(section => {
                        const rect = section.getBoundingClientRect();
                        const isVisible = rect.top <= 100 && rect.bottom >= 100;
                        
                        if (isVisible) {
                            this.setActiveLink(section.id);
                        }
                    });
                    
                    ticking = false;
                };
                
                const requestTick = () => {
                    if (!ticking) {
                        requestAnimationFrame(updateActiveSection);
                        ticking = true;
                    }
                };
                
                window.addEventListener('scroll', requestTick);
            }
            
            setupClickHandlers() {
                this.links.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = link.getAttribute('href').substring(1);
                        const targetSection = document.getElementById(targetId);
                        
                        if (targetSection) {
                            targetSection.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });
            }
            
            setActiveLink(sectionId) {
                this.links.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${sectionId}`) {
                        link.classList.add('active');
                    }
                });
            }
        }

        // ===== MICRO-INTERACTIONS MANAGER =====
        class MicroInteractions {
            constructor() {
                this.setupHoverEffects();
                this.setupClickEffects();
                this.setupLoadingStates();
            }
            
            setupHoverEffects() {
                const interactiveElements = document.querySelectorAll('.interactive-element');
                
                interactiveElements.forEach(element => {
                    element.addEventListener('mouseenter', () => {
                        element.style.transform = 'translateY(-2px)';
                    });
                    
                    element.addEventListener('mouseleave', () => {
                        element.style.transform = 'translateY(0)';
                    });
                });
            }
            
            setupClickEffects() {
                const buttons = document.querySelectorAll('.btn');
                
                buttons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        // Create ripple effect
                        const ripple = document.createElement('span');
                        const rect = button.getBoundingClientRect();
                        const size = Math.max(rect.width, rect.height);
                        const x = e.clientX - rect.left - size / 2;
                        const y = e.clientY - rect.top - size / 2;
                        
                        ripple.style.cssText = `
                            position: absolute;
                            width: ${size}px;
                            height: ${size}px;
                            left: ${x}px;
                            top: ${y}px;
                            background: rgba(255, 255, 255, 0.3);
                            border-radius: 50%;
                            transform: scale(0);
                            animation: ripple 0.6s linear;
                            pointer-events: none;
                        `;
                        
                        button.appendChild(ripple);
                        
                        setTimeout(() => {
                            ripple.remove();
                        }, 600);
                    });
                });
            }
            
            setupLoadingStates() {
                // Add loading state to dynamic content
                const dynamicElements = document.querySelectorAll('[data-loading]');
                
                dynamicElements.forEach(element => {
                    element.classList.add('loading');
                    
                    // Simulate loading completion
                    setTimeout(() => {
                        element.classList.remove('loading');
                    }, 1000);
                });
            }
        }

        // ===== ACCESSIBILITY MANAGER =====
        class AccessibilityManager {
            constructor() {
                this.setupKeyboardNavigation();
                this.setupARIALabels();
                this.setupFocusManagement();
            }
            
            setupKeyboardNavigation() {
                // Map keyboard navigation
                const map = document.getElementById('panamaMap');
                if (map) {
                    map.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.handleMapSelection();
                        }
                    });
                }
                
                // Calendar keyboard navigation
                const monthHeaders = document.querySelectorAll('.month-header');
                monthHeaders.forEach(header => {
                    header.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            header.click();
                        }
                    });
                });
            }
            
            setupARIALabels() {
                // Update progress bar ARIA value
                const progressBar = document.getElementById('progressBar');
                if (progressBar) {
                    const updateProgress = () => {
                        const scrollTop = window.pageYOffset;
                        const documentHeight = document.documentElement.scrollHeight - window.innerHeight;
                        const progress = Math.round((scrollTop / documentHeight) * 100);
                        
                        progressBar.setAttribute('aria-valuenow', progress);
                        progressBar.setAttribute('aria-label', `Page progress: ${progress}%`);
                    };
                    
                    window.addEventListener('scroll', updateProgress);
                }
            }
            
            setupFocusManagement() {
                // Manage focus for modals
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    modal.addEventListener('keydown', (e) => {
                        if (e.key === 'Escape') {
                            modal.style.display = 'none';
                            // Return focus to trigger element
                            const trigger = document.activeElement;
                            if (trigger) trigger.focus();
                        }
                    });
                });
            }
            
            handleMapSelection() {
                // Handle map selection with keyboard
                const activeRegion = document.querySelector('.region.active');
                if (activeRegion) {
                    const regionName = activeRegion.getAttribute('data-region');
                    this.showRegionDetails(regionName);
                }
            }
            
            showRegionDetails(regionName) {
                // Show region details with proper ARIA announcements
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'polite');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.className = 'sr-only';
                announcement.textContent = `Selected region: ${regionName}`;
                
                document.body.appendChild(announcement);
                
                setTimeout(() => {
                    document.body.removeChild(announcement);
                }, 1000);
            }
        }

        // ===== PERFORMANCE OPTIMIZER =====
        class PerformanceOptimizer {
            constructor() {
                this.setupLazyLoading();
                this.setupImageOptimization();
                this.setupResourceHints();
            }
            
            setupLazyLoading() {
                // Lazy load images
                const images = document.querySelectorAll('img[data-src]');
                const imageObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            img.classList.remove('lazy');
                            imageObserver.unobserve(img);
                        }
                    });
                });
                
                images.forEach(img => imageObserver.observe(img));
            }
            
            setupImageOptimization() {
                // Add responsive image loading
                const images = document.querySelectorAll('img');
                images.forEach(img => {
                    img.loading = 'lazy';
                    img.decoding = 'async';
                });
            }
            
            setupResourceHints() {
                // Preload next likely resources
                const preloadLink = document.createElement('link');
                preloadLink.rel = 'preload';
                preloadLink.href = 'js/main.js';
                preloadLink.as = 'script';
                document.head.appendChild(preloadLink);
            }
        }

        // ===== CALENDAR FUNCTIONALITY =====
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize calendar
            initCalendar();
        });
        
        function initCalendar() {
            // Month panel toggle functionality
            const monthHeaders = document.querySelectorAll('.month-header');
            
            monthHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const monthPanel = this.parentElement;
                    const isActive = monthPanel.classList.contains('active');
                    
                    // Close all other panels
                    document.querySelectorAll('.month-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    
                    // Toggle current panel
                    if (!isActive) {
                        monthPanel.classList.add('active');
                    }
                });
            });
            
            // Event item click functionality (optional modal)
            const eventItems = document.querySelectorAll('.holiday-item, .festival-item');
            
            eventItems.forEach(item => {
                item.addEventListener('click', function() {
                    const tooltip = this.getAttribute('data-tooltip');
                    if (tooltip) {
                        showEventModal(tooltip);
                    }
                });
            });
        }
        
        function showEventModal(tooltip) {
            // Create modal if it doesn't exist
            let modal = document.getElementById('eventModal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'eventModal';
                modal.className = 'modal';
                modal.innerHTML = `
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <div id="eventModalContent"></div>
                    </div>
                `;
                document.body.appendChild(modal);
                
                // Close modal functionality
                const closeBtn = modal.querySelector('.close');
                closeBtn.addEventListener('click', () => {
                    modal.style.display = 'none';
                });
                
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            }
            
            // Set content and show modal
            const content = modal.querySelector('#eventModalContent');
            content.innerHTML = `<p>${tooltip}</p>`;
            modal.style.display = 'block';
        }
    </script>
    
<script src="js/dynamic-css.js"></script>

    <!-- National Symbols Modal -->
    <div id="symbolModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon"></div>
                <h2 id="modalTitle"></h2>
            </div>
            <div class="modal-body">
                <div class="modal-image">
                    <img id="modalImage" src="" alt="">
                </div>
                <div class="modal-description">
                    <p id="modalDescription"></p>
                    <div class="modal-facts" id="modalFacts"></div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
