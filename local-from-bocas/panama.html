<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panamá - Local From Bocas | Descubre las 10 Provincias y 3 Comarcas</title>
    <meta name="description" content="Explora la diversidad de Panamá: 10 provincias y 3 comarcas indígenas. Descubre la riqueza cultural, geográfica y natural de cada región del país.">
    <meta name="keywords" content="Panamá, provincias Panamá, comarcas indígenas, geografía Panamá, cultura panameña">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/geojson-map.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos globales para ancho completo */
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        /* Ancho adaptativo inteligente para el mapa */
        .full-width-map-container {
            width: 90vw;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }
        
        /* Tablet: 95% del ancho */
        @media (max-width: 1024px) {
            .full-width-map-container {
                width: 95vw;
                max-width: none;
            }
        }
        
        /* Mobile: 100% del ancho */
        @media (max-width: 768px) {
            .full-width-map-container {
                width: 100vw;
                margin-left: calc(-50vw + 50%);
                max-width: none;
            }
        }
        
        .hero {
            background: linear-gradient(135deg, var(--jungle-teal) 0%, var(--ocean-blue) 100%);
            background-image: url('https://via.placeholder.com/1920x800/0F5B55/FFFFFF?text=Panama+Completo');
            background-size: cover;
            background-position: center;
            background-blend-mode: overlay;
        }
        .hero::before {
            background: rgba(15, 91, 85, 0.7);
        }
        .panama-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .stat-item {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
        }
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--jungle-teal);
            font-family: var(--font-display);
        }
        .stat-label {
            color: var(--neutral-gray);
            font-weight: 500;
            font-size: 14px;
        }
        .province-card, .comarca-card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: transform 0.2s ease;
        }
        .province-card:hover, .comarca-card:hover {
            transform: translateY(-2px);
        }
        .province-header, .comarca-header {
            position: relative;
        }
        .province-header .pill, .comarca-header .pill {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }
        .province-content, .comarca-content {
            padding: 1.5rem;
        }
        .province-highlights, .comarca-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        .hero-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* Estilos base del contenedor del mapa */
        .full-width-map-container {
            margin-top: 0;
            margin-bottom: 0;
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
        }
        
        /* Estilos para el mapa interactivo */
        .interactive-map-container {
            position: relative;
            width: 100%;
            height: 600px;
            background: transparent !important;
            border-radius: 8px;
            overflow: hidden;
            border: none !important;
            margin: 0;
            padding: 0;
            box-shadow: none !important;
        }
        
        /* Ajustes responsivos para el mapa */
        @media (max-width: 1024px) {
            .interactive-map-container {
                height: 500px;
                border-radius: 6px;
                border: none !important;
                background: transparent !important;
                box-shadow: none !important;
            }
        }
        
        @media (max-width: 768px) {
            .interactive-map-container {
                height: 400px;
                border-radius: 0;
                border: none !important;
                background: transparent !important;
                box-shadow: none !important;
            }
        }
        
        .interactive-map-container svg {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .province-path {
            fill: var(--seafoam);
            stroke: var(--jungle-teal);
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .province-path:hover {
            fill: var(--palm-leaf);
            transform: scale(1.02);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        .comarca-path {
            fill: var(--sunset-coral);
            opacity: 0.8;
            stroke: var(--jungle-teal);
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .comarca-path:hover {
            fill: var(--sunset-coral);
            opacity: 1;
            transform: scale(1.02);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        /* Tarjeta dinámica */
        .dynamic-card {
            position: absolute;
            width: 350px;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideInRight 0.3s ease;
            pointer-events: none; /* Evitar que interfiera con el hover */
        }
        
        .dynamic-card-content {
            padding: 0;
        }
        
        .dynamic-card-header {
            position: relative;
        }
        
        .dynamic-card-header .pill {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }
        
        .dynamic-card-body {
            padding: 1.5rem;
        }
        
        .dynamic-card-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @media (max-width: 768px) {
            .panama-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            .grid-2 {
                grid-template-columns: 1fr;
            }
            .dynamic-card {
                position: relative;
                top: auto;
                right: auto;
                width: 100%;
                margin-top: 1rem;
            }
            .interactive-map-container {
                height: 400px;
            }
        }
        
        @media (max-width: 480px) {
            .panama-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">Local From Bocas</a>
            <nav>
                <ul class="navbar-nav">
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="servicios.html">Servicios</a></li>
                    <li><a href="vlogs.html">Vlogs</a></li>
                    <li><a href="panama.html" class="active">Panamá</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" style="height: 25vh; min-height: 200px;">
        <div class="hero-content">
            <div class="pill mb-md">🇵🇦 Descubre Panamá</div>
            <h1>La Riqueza de un País Completo</h1>
            <p class="body-large">Explora las 10 provincias y 3 comarcas indígenas que conforman la diversidad cultural y natural de Panamá</p>
        </div>
    </section>

    <!-- Mapa Interactivo - Primera Sección -->
    <div class="full-width-map-container">
                    <div class="interactive-map-container" id="panamaMap">
                        <!-- El mapa SVG se generará dinámicamente con JavaScript -->
                    </div>
                    
                    <!-- Tarjeta dinámica que aparece al hacer hover -->
                    <div id="dynamicCard" class="dynamic-card" style="display: none;">
                        <div class="dynamic-card-content">
                            <div class="dynamic-card-header">
                                <img id="dynamicCardImage" src="" alt="" style="width: 100%; height: 200px; object-fit: cover; border-radius: var(--radius-md);">
                                <div class="pill" id="dynamicCardPill">🏝️ Región</div>
                            </div>
                            <div class="dynamic-card-body">
                                <h3 id="dynamicCardTitle">Título</h3>
                                <p id="dynamicCardDescription">Descripción de la región...</p>
                                <div class="dynamic-card-highlights" id="dynamicCardHighlights">
                                    <!-- Los highlights se llenarán dinámicamente -->
                                </div>
                            </div>
                        </div>
                    </div>
    </div>

    <!-- Panama Overview - Segunda Sección -->
    <section class="section">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Un País de Contrastes y Belleza</h2>
                <p class="body-large mb-lg">Panamá es mucho más que su famoso canal. Es un país que conecta dos océanos y dos continentes, creando una diversidad única de ecosistemas, culturas y tradiciones.</p>
            </div>
            
            <div class="panama-stats" style="max-width: 800px; margin: 0 auto;">
                <div class="stat-item">
                    <div class="stat-number">10</div>
                    <div class="stat-label">Provincias</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Comarcas Indígenas</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">75,517</div>
                    <div class="stat-label">km² de Territorio</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">4.3M</div>
                    <div class="stat-label">Habitantes</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Provincias (Oculto - reemplazado por mapa interactivo) -->
    <section class="section" style="background-color: var(--seafoam); display: none;">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Las 10 Provincias de Panamá</h2>
                <p class="body-large">Cada provincia tiene su propia identidad, cultura y atractivos únicos</p>
            </div>
            
            <div class="grid grid-2">
                <!-- Bocas del Toro -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/0F5B55/FFFFFF?text=Bocas+del+Toro" alt="Bocas del Toro" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏝️ Caribe</div>
                    </div>
                    <div class="province-content">
                        <h3>Bocas del Toro</h3>
                        <p>Conocida como "Las Galápagos del Siglo XXI", esta provincia caribeña alberga una biodiversidad excepcional y una rica cultura afrocaribeña.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌊 Archipiélago único</span>
                            <span class="pill-light">🌿 Biodiversidad excepcional</span>
                            <span class="pill-light">🎭 Cultura afrocaribeña</span>
                        </div>
                        <a href="panama/bocas-del-toro.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Chiriquí -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/8DBB66/FFFFFF?text=Chiriqui" alt="Chiriquí" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏔️ Tierras Altas</div>
                    </div>
                    <div class="province-content">
                        <h3>Chiriquí</h3>
                        <p>La "Suiza de Panamá" con sus tierras altas, volcanes y clima templado. Cuna de la agricultura de altura y el ecoturismo.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌋 Volcán Barú</span>
                            <span class="pill-light">☕ Café de altura</span>
                            <span class="pill-light">🌲 Bosques nubosos</span>
                        </div>
                        <a href="panama/chiriqui.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Coclé -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/FF7466/FFFFFF?text=Cocle" alt="Coclé" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏖️ Pacífico Central</div>
                    </div>
                    <div class="province-content">
                        <h3>Coclé</h3>
                        <p>Corazón geográfico de Panamá con playas del Pacífico, montañas y una rica tradición cultural que incluye el famoso Carnaval de Penonomé.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🎭 Carnaval tradicional</span>
                            <span class="pill-light">🏖️ Playas del Pacífico</span>
                            <span class="pill-light">🏔️ Cordillera Central</span>
                        </div>
                        <a href="panama/cocle.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Colón -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/2C8AC6/FFFFFF?text=Colon" alt="Colón" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🚢 Zona Libre</div>
                    </div>
                    <div class="province-content">
                        <h3>Colón</h3>
                        <p>Puerta de entrada del Caribe con la Zona Libre de Colón, fortificaciones coloniales y playas caribeñas vírgenes.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🏰 Fortificaciones coloniales</span>
                            <span class="pill-light">🛒 Zona Libre</span>
                            <span class="pill-light">🏝️ Islas caribeñas</span>
                        </div>
                        <a href="panama/colon.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Darién -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/5B4B3F/FFFFFF?text=Darien" alt="Darién" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌿 Selva Virgen</div>
                    </div>
                    <div class="province-content">
                        <h3>Darién</h3>
                        <p>La provincia más salvaje de Panamá con selvas vírgenes, comunidades indígenas y el famoso Tapón del Darién.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌳 Selva virgen</span>
                            <span class="pill-light">👥 Comunidades indígenas</span>
                            <span class="pill-light">🦜 Biodiversidad única</span>
                        </div>
                        <a href="panama/darien.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Herrera -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/8DBB66/FFFFFF?text=Herrera" alt="Herrera" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌾 Azuero</div>
                    </div>
                    <div class="province-content">
                        <h3>Herrera</h3>
                        <p>Corazón de la Península de Azuero con tradiciones folclóricas, artesanías y una rica herencia cultural española.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🎭 Folclor tradicional</span>
                            <span class="pill-light">🏺 Artesanías</span>
                            <span class="pill-light">🌾 Tradición ganadera</span>
                        </div>
                        <a href="panama/herrera.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Los Santos -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/FF7466/FFFFFF?text=Los+Santos" alt="Los Santos" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🎭 Folclor</div>
                    </div>
                    <div class="province-content">
                        <h3>Los Santos</h3>
                        <p>Cuna del folclor panameño con el famoso Festival de la Mejorana, tradiciones centenarias y hermosas playas del Pacífico.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🎪 Festival de la Mejorana</span>
                            <span class="pill-light">🏖️ Playas del Pacífico</span>
                            <span class="pill-light">🎭 Folclor auténtico</span>
                        </div>
                        <a href="panama/los-santos.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Panamá -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/0F5B55/FFFFFF?text=Panama" alt="Panamá" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏙️ Capital</div>
                    </div>
                    <div class="province-content">
                        <h3>Panamá</h3>
                        <p>La capital del país con el Casco Antiguo, rascacielos modernos, el Canal de Panamá y una vibrante vida urbana.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🏗️ Canal de Panamá</span>
                            <span class="pill-light">🏛️ Casco Antiguo</span>
                            <span class="pill-light">🌆 Vida urbana</span>
                        </div>
                        <a href="panama/panama.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Panamá Oeste -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/2C8AC6/FFFFFF?text=Panama+Oeste" alt="Panamá Oeste" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌊 Pacífico</div>
                    </div>
                    <div class="province-content">
                        <h3>Panamá Oeste</h3>
                        <p>La provincia más joven con hermosas playas del Pacífico, desarrollo urbano y acceso directo a la capital.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🏖️ Playas del Pacífico</span>
                            <span class="pill-light">🏘️ Desarrollo urbano</span>
                            <span class="pill-light">🌊 Acceso al mar</span>
                        </div>
                        <a href="panama/panama-oeste.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>

                <!-- Veraguas -->
                <div class="province-card">
                    <div class="province-header">
                        <img src="https://via.placeholder.com/300x200/5B4B3F/FFFFFF?text=Veraguas" alt="Veraguas" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌊 Dos Mares</div>
                    </div>
                    <div class="province-content">
                        <h3>Veraguas</h3>
                        <p>La única provincia con costas en ambos océanos, rica en historia colonial y hermosos paisajes naturales.</p>
                        <div class="province-highlights">
                            <span class="pill-light">🌊 Caribe y Pacífico</span>
                            <span class="pill-light">🏰 Historia colonial</span>
                            <span class="pill-light">🏔️ Paisajes naturales</span>
                        </div>
                        <a href="panama/veraguas.html" class="btn btn-primary">Explorar Provincia</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Comarcas Indígenas (Oculto - reemplazado por mapa interactivo) -->
    <section class="section" style="display: none;">
        <div class="container">
            <div class="text-center mb-xxl">
                <h2>Las 3 Comarcas Indígenas</h2>
                <p class="body-large">Territorios autónomos que preservan las culturas ancestrales de Panamá</p>
            </div>
            
            <div class="grid grid-3">
                <!-- Guna Yala -->
                <div class="comarca-card">
                    <div class="comarca-header">
                        <img src="https://via.placeholder.com/400x250/0F5B55/FFFFFF?text=Guna+Yala" alt="Guna Yala" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏝️ Caribe</div>
                    </div>
                    <div class="comarca-content">
                        <h3>Guna Yala</h3>
                        <p>Comarca autónoma en el Caribe con 365 islas, cultura guna preservada y hermosas playas vírgenes.</p>
                        <div class="comarca-highlights">
                            <span class="pill-light">🏝️ 365 islas</span>
                            <span class="pill-light">🎨 Molas tradicionales</span>
                            <span class="pill-light">🌊 Aguas cristalinas</span>
                        </div>
                        <a href="panama/guna-yala.html" class="btn btn-primary">Explorar Comarca</a>
                    </div>
                </div>

                <!-- Emberá-Wounaan -->
                <div class="comarca-card">
                    <div class="comarca-header">
                        <img src="https://via.placeholder.com/400x250/8DBB66/FFFFFF?text=Embera-Wounaan" alt="Emberá-Wounaan" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🌿 Selva</div>
                    </div>
                    <div class="comarca-content">
                        <h3>Emberá-Wounaan</h3>
                        <p>Comarca en la selva del Darién que preserva las tradiciones de los pueblos emberá y wounaan.</p>
                        <div class="comarca-highlights">
                            <span class="pill-light">🌳 Selva tropical</span>
                            <span class="pill-light">🎨 Artesanías en madera</span>
                            <span class="pill-light">🏹 Tradiciones ancestrales</span>
                        </div>
                        <a href="panama/embera-wounaan.html" class="btn btn-primary">Explorar Comarca</a>
                    </div>
                </div>

                <!-- Ngäbe-Buglé -->
                <div class="comarca-card">
                    <div class="comarca-header">
                        <img src="https://via.placeholder.com/400x250/FF7466/FFFFFF?text=Ngabe-Bugle" alt="Ngäbe-Buglé" style="width: 100%; border-radius: var(--radius-md);">
                        <div class="pill">🏔️ Tierras Altas</div>
                    </div>
                    <div class="comarca-content">
                        <h3>Ngäbe-Buglé</h3>
                        <p>La comarca más grande de Panamá en las tierras altas, hogar de los pueblos ngäbe y buglé.</p>
                        <div class="comarca-highlights">
                            <span class="pill-light">🏔️ Tierras altas</span>
                            <span class="pill-light">☕ Cultivo de café</span>
                            <span class="pill-light">🎭 Tradiciones vivas</span>
                        </div>
                        <a href="panama/ngabe-bugle.html" class="btn btn-primary">Explorar Comarca</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section" style="background: linear-gradient(135deg, var(--jungle-teal) 0%, var(--ocean-blue) 100%); color: white;">
        <div class="container text-center">
            <h2 style="color: white;">¿Listo para Explorar Panamá?</h2>
            <p class="body-large" style="color: rgba(255,255,255,0.9); margin-bottom: 2rem;">Comienza tu aventura en Bocas del Toro y descubre la diversidad de todo el país.</p>
            <div class="hero-actions">
                <a href="servicios.html" class="btn" style="background: white; color: var(--jungle-teal);">Nuestros Servicios</a>
                <a href="contacto.html" class="btn btn-secondary" style="border-color: white; color: white;">Planificar Viaje</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Local From Bocas</h3>
                    <p>Conectando viajeros con la auténtica cultura de Bocas del Toro, Panamá.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Servicios</h3>
                    <a href="servicios.html#tours">Tours Históricos</a>
                    <a href="servicios.html#merchandise">Mercancía Cultural</a>
                    <a href="servicios.html#assistance">Asistencia Personalizada</a>
                </div>
                
                <div class="footer-section">
                    <h3>Explorar</h3>
                    <a href="vlogs.html">Vlogs</a>
                    <a href="panama.html">Panamá</a>
                    <a href="nosotros.html">Nosotros</a>
                </div>
                
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <a href="contacto.html">Contáctanos</a>
                    <a href="mailto:info@localfrombocas.com">info@localfrombocas.com</a>
                    <a href="tel:+507-1234-5678">+507 1234-5678</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Local From Bocas. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // Datos de las provincias y comarcas
        const regionData = {
            'bocas-del-toro': {
                name: 'Bocas del Toro',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/0F5B55/FFFFFF?text=Bocas+del+Toro+Caribbean',
                pill: '🏝️ Caribe',
                description: 'Conocida como "Las Galápagos del Siglo XXI", esta provincia caribeña alberga una biodiversidad excepcional y una rica cultura afrocaribeña.',
                highlights: ['🌊 Archipiélago único', '🌿 Biodiversidad excepcional', '🎭 Cultura afrocaribeña']
            },
            'chiriqui': {
                name: 'Chiriquí',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/8DBB66/FFFFFF?text=Chiriqui',
                pill: '🏔️ Tierras Altas',
                description: 'La "Suiza de Panamá" con sus tierras altas, volcanes y clima templado. Cuna de la agricultura de altura y el ecoturismo.',
                highlights: ['🌋 Volcán Barú', '☕ Café de altura', '🌲 Bosques nubosos']
            },
            'cocle': {
                name: 'Coclé',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/FF7466/FFFFFF?text=Cocle',
                pill: '🏖️ Pacífico Central',
                description: 'Corazón geográfico de Panamá con playas del Pacífico, montañas y una rica tradición cultural que incluye el famoso Carnaval de Penonomé.',
                highlights: ['🎭 Carnaval tradicional', '🏖️ Playas del Pacífico', '🏔️ Cordillera Central']
            },
            'colon': {
                name: 'Colón',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/2C8AC6/FFFFFF?text=Colon',
                pill: '🚢 Zona Libre',
                description: 'Puerta de entrada del Caribe con la Zona Libre de Colón, fortificaciones coloniales y playas caribeñas vírgenes.',
                highlights: ['🏰 Fortificaciones coloniales', '🛒 Zona Libre', '🏝️ Islas caribeñas']
            },
            'darien': {
                name: 'Darién',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/5B4B3F/FFFFFF?text=Darien',
                pill: '🌿 Selva Virgen',
                description: 'La provincia más salvaje de Panamá con selvas vírgenes, comunidades indígenas y el famoso Tapón del Darién.',
                highlights: ['🌳 Selva virgen', '👥 Comunidades indígenas', '🦜 Biodiversidad única']
            },
            'herrera': {
                name: 'Herrera',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/8DBB66/FFFFFF?text=Herrera',
                pill: '🌾 Azuero',
                description: 'Corazón de la Península de Azuero con tradiciones folclóricas, artesanías y una rica herencia cultural española.',
                highlights: ['🎭 Folclor tradicional', '🏺 Artesanías', '🌾 Tradición ganadera']
            },
            'los-santos': {
                name: 'Los Santos',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/FF7466/FFFFFF?text=Los+Santos',
                pill: '🎭 Folclor',
                description: 'Cuna del folclor panameño con el famoso Festival de la Mejorana, tradiciones centenarias y hermosas playas del Pacífico.',
                highlights: ['🎪 Festival de la Mejorana', '🏖️ Playas del Pacífico', '🎭 Folclor auténtico']
            },
            'panama': {
                name: 'Panamá',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/0F5B55/FFFFFF?text=Panama',
                pill: '🏙️ Capital',
                description: 'La capital del país con el Casco Antiguo, rascacielos modernos, el Canal de Panamá y una vibrante vida urbana.',
                highlights: ['🏗️ Canal de Panamá', '🏛️ Casco Antiguo', '🌆 Vida urbana']
            },
            'panama-oeste': {
                name: 'Panamá Oeste',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/2C8AC6/FFFFFF?text=Panama+Oeste',
                pill: '🌊 Pacífico',
                description: 'La provincia más joven con hermosas playas del Pacífico, desarrollo urbano y acceso directo a la capital.',
                highlights: ['🏖️ Playas del Pacífico', '🏘️ Desarrollo urbano', '🌊 Acceso al mar']
            },
            'veraguas': {
                name: 'Veraguas',
                type: 'provincia',
                image: 'https://via.placeholder.com/350x200/5B4B3F/FFFFFF?text=Veraguas',
                pill: '🌊 Dos Mares',
                description: 'La única provincia con costas en ambos océanos, rica en historia colonial y hermosos paisajes naturales.',
                highlights: ['🌊 Caribe y Pacífico', '🏰 Historia colonial', '🏔️ Paisajes naturales']
            },
            'guna-yala': {
                name: 'Guna Yala',
                type: 'comarca',
                image: 'https://via.placeholder.com/350x200/0F5B55/FFFFFF?text=Guna+Yala',
                pill: '🏝️ Caribe',
                description: 'Comarca autónoma en el Caribe con 365 islas, cultura guna preservada y hermosas playas vírgenes.',
                highlights: ['🏝️ 365 islas', '🎨 Molas tradicionales', '🌊 Aguas cristalinas']
            },
            'embera-wounaan': {
                name: 'Emberá-Wounaan',
                type: 'comarca',
                image: 'https://via.placeholder.com/350x200/8DBB66/FFFFFF?text=Embera-Wounaan',
                pill: '🌿 Selva',
                description: 'Comarca en la selva del Darién que preserva las tradiciones de los pueblos emberá y wounaan.',
                highlights: ['🌳 Selva tropical', '🎨 Artesanías en madera', '🏹 Tradiciones ancestrales']
            },
            'ngabe-bugle': {
                name: 'Ngäbe-Buglé',
                type: 'comarca',
                image: 'https://via.placeholder.com/350x200/FF7466/FFFFFF?text=Ngabe-Bugle',
                pill: '🏔️ Tierras Altas',
                description: 'La comarca más grande de Panamá en las tierras altas, hogar de los pueblos ngäbe y buglé.',
                highlights: ['🏔️ Tierras altas', '☕ Cultivo de café', '🎭 Tradiciones vivas']
            }
        };

        // Función para mostrar la tarjeta dinámica
        function showDynamicCard(regionKey, event) {
            const region = regionData[regionKey];
            if (!region) return;

            const card = document.getElementById('dynamicCard');
            const image = document.getElementById('dynamicCardImage');
            const pill = document.getElementById('dynamicCardPill');
            const title = document.getElementById('dynamicCardTitle');
            const description = document.getElementById('dynamicCardDescription');
            const highlights = document.getElementById('dynamicCardHighlights');

            // Actualizar contenido
            image.src = region.image;
            image.alt = region.name;
            pill.textContent = region.pill;
            title.textContent = region.name;
            description.textContent = region.description;
            
            highlights.innerHTML = '';
            region.highlights.forEach(highlight => {
                const span = document.createElement('span');
                span.className = 'pill-light';
                span.textContent = highlight;
                highlights.appendChild(span);
            });

            // Resetear posición y mostrar primero
            card.style.display = 'block';
            card.style.left = '0px';
            card.style.top = '0px';

            // Posicionar la tarjeta al lado opuesto de la ubicación
            if (event) {
                // Usar requestAnimationFrame para asegurar que el DOM se actualice
                requestAnimationFrame(() => {
                    const rect = document.getElementById('panamaMap').getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    
                    // Dimensiones de la tarjeta
                    const cardWidth = 350;
                    const cardHeight = 300;
                    
                    // Provincias que siempre deben mostrar el popup a la derecha
                    const rightSideProvinces = [
                        'bocas-del-toro', 'chiriqui', 'ngabe-bugle'
                    ];
                    
                    // Provincias que siempre deben mostrar el popup a la izquierda
                    const leftSideProvinces = [
                        'herrera', 'los-santos', 'veraguas', 'cocle'
                    ];
                    
                    // Provincias que deben mostrar el popup en la parte inferior
                    const bottomSideProvinces = [
                        'colon'
                    ];
                    
                    // Posicionar en el lado opuesto
                    let finalX, finalY;
                    
                    // Si es una provincia específica que debe ir a la derecha
                    if (rightSideProvinces.includes(regionKey)) {
                        // Mostrar el popup más hacia la derecha del mapa
                        finalX = Math.min(rect.width - cardWidth - 20, rect.width * 0.6);
                        finalY = Math.max(10, Math.min(y - cardHeight / 2, rect.height - cardHeight - 10));
                    } else if (leftSideProvinces.includes(regionKey)) {
                        // Mostrar el popup al lado izquierdo del mapa
                        finalX = Math.max(20, rect.width * 0.1);
                        finalY = Math.max(10, Math.min(y - cardHeight / 2, rect.height - cardHeight - 10));
                    } else if (bottomSideProvinces.includes(regionKey)) {
                        // Mostrar el popup en la parte inferior del mapa
                        finalX = Math.max(20, Math.min(x - cardWidth / 2, rect.width - cardWidth - 20));
                        finalY = Math.max(rect.height - cardHeight - 20, rect.height * 0.6);
                    } else {
                        // Para otras provincias, usar la lógica normal
                        const mapCenterX = rect.width / 2;
                        const isLeftSide = x < mapCenterX;
                        
                        if (isLeftSide) {
                            // Si está en el lado izquierdo, mostrar el popup a la derecha
                            finalX = Math.min(x + 30, rect.width - cardWidth - 20);
                        } else {
                            // Si está en el lado derecho, mostrar el popup a la izquierda
                            finalX = Math.max(x - cardWidth - 30, 20);
                        }
                        
                        // Centrar verticalmente, pero ajustar si se sale del contenedor
                        finalY = Math.max(10, Math.min(y - cardHeight / 2, rect.height - cardHeight - 10));
                    }
                    
                    card.style.left = `${finalX}px`;
                    card.style.top = `${finalY}px`;
                });
            }
        }

        // Función para ocultar la tarjeta dinámica
        function hideDynamicCard() {
            const card = document.getElementById('dynamicCard');
            card.style.display = 'none';
        }

        // Función para cargar y renderizar el mapa GeoJSON
        async function loadPanamaMap() {
            try {
                const response = await fetch('./data/geoBoundaries-PAN-ADM1.geojson');
                const geo = await response.json();
                renderMap(geo);
            } catch (error) {
                console.error('Error cargando GeoJSON:', error);
            }
        }

        // Función para renderizar el mapa
        function renderMap(geo) {
            const container = document.getElementById('panamaMap');
            container.innerHTML = '';

            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('viewBox', '0 0 1000 400');
            svg.style.width = '100%';
            svg.style.height = '100%';

            // Calcular bounds
            let minLon = Infinity, minLat = Infinity, maxLon = -Infinity, maxLat = -Infinity;

            function scanCoords(coords) {
                for (const poly of coords) {
                    const rings = Array.isArray(poly[0][0]) ? poly : [poly];
                    for (const ring of rings) {
                        for (const pt of ring) {
                            const [lon, lat] = pt;
                            if (lon < minLon) minLon = lon;
                            if (lon > maxLon) maxLon = lon;
                            if (lat < minLat) minLat = lat;
                            if (lat > maxLat) maxLat = lat;
                        }
                    }
                }
            }

            for (const f of geo.features) {
                const g = f.geometry;
                if (!g) continue;
                if (g.type === 'Polygon') scanCoords([g.coordinates]);
                if (g.type === 'MultiPolygon') scanCoords(g.coordinates);
            }

            const viewW = 1000, viewH = 400;
            function project([lon, lat]) {
                const x = (lon - minLon) / (maxLon - minLon) * viewW;
                const y = (maxLat - lat) / (maxLat - minLat) * viewH;
                return [x, y];
            }

            function pathFromPolygon(coords) {
                let d = '';
                for (const ring of coords) {
                    const [startX, startY] = project(ring[0]);
                    d += `M ${startX} ${startY}`;
                    for (let i = 1; i < ring.length; i++) {
                        const [x, y] = project(ring[i]);
                        d += ` L ${x} ${y}`;
                    }
                    d += ' Z ';
                }
                return d.trim();
            }

            geo.features.forEach((f, idx) => {
                const g = f.geometry;
                let d = '';
                if (g.type === 'Polygon') {
                    d = pathFromPolygon(g.coordinates);
                } else if (g.type === 'MultiPolygon') {
                    d = g.coordinates.map(poly => pathFromPolygon(poly)).join(' ');
                } else {
                    return;
                }

                const name = f.properties.shapeName || `Región ${idx + 1}`;
                const normalizedName = normalizeName(name);
                const isComarca = name.includes('Comarca');

                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', d);
                path.setAttribute('class', isComarca ? 'comarca-path' : 'province-path');
                path.setAttribute('data-region', normalizedName);

                // Eventos de hover
                path.addEventListener('mouseenter', (event) => {
                    showDynamicCard(normalizedName, event);
                });

                path.addEventListener('mouseleave', () => {
                    hideDynamicCard();
                });

                // Evento de click
                path.addEventListener('click', () => {
                    window.location.href = `panama/${normalizedName}.html`;
                });

                svg.appendChild(path);
            });

            container.appendChild(svg);
        }

        // Función para normalizar nombres
        function normalizeName(name) {
            const nameMap = {
                'Provincia de Bocas del Toro': 'bocas-del-toro',
                'Colón Province': 'colon',
                'Provincia de Darién': 'darien',
                'Comarca Emberá-Wounaan': 'embera-wounaan',
                'Comarca Guna Yala': 'guna-yala',
                'Provincia de Herrera': 'herrera',
                'Provincia de Los Santos': 'los-santos',
                'Comarca Ngäbe-Buglé': 'ngabe-bugle',
                'Provincia de Panamá': 'panama',
                'Provincia de Panamá Oeste': 'panama-oeste',
                'Provincia de Veraguas': 'veraguas',
                'Provincia de Chiriquí': 'chiriqui',
                'Provincia de Coclé': 'cocle'
            };
            
            return nameMap[name] || name.toLowerCase().replace(/\s+/g, '-');
        }

        // Cargar el mapa cuando se carga la página
        document.addEventListener('DOMContentLoaded', loadPanamaMap);
    </script>
</body>
</html>
